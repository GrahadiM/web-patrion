<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program Holistik - PATRION Universe</title>
    <meta name="description" content="Jelajahi seluruh program multimedia PATRION - dari film cinema, animasi 3D, hingga konten digital eksklusif">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Program Holistik - PATRION Universe">
    <meta property="og:description" content="Ekosistem konten multimedia terintegrasi dari dunia PATRION">
    <meta property="og:image" content="assets/images/program-og.jpg">
    <meta property="og:url" content="https://patrion.com/program">
    
    <!-- CSS & Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0f172a',
                        secondary: '#1e293b',
                        accent: '#fbbf24',
                        'fantasy-blue': '#1e3a8a',
                        'fantasy-purple': '#5b21b6',
                        'fantasy-dark': '#0f172a',
                        'fantasy-gold': '#fbbf24',
                        // Warna elemen berdasarkan karakter
                        fire: '#dc2626',
                        wind: '#94a3b8',
                        water: '#3b82f6',
                        earth: '#d97706',
                        thunder: '#7c3aed',
                        nature: '#16a34a',
                        light: '#fde047',
                        dark: '#1e293b'
                    },
                    backgroundImage: {
                        'fantasy-gradient': 'linear-gradient(135deg, #1e3a8a 0%, #5b21b6 50%, #0f172a 100%)',
                        'gold-gradient': 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        
        /* Program Card Styles */
        .program-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(251, 191, 36, 0.15);
        }
        
        .program-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: rgba(251, 191, 36, 0.4);
            box-shadow: 0 20px 40px rgba(123, 97, 255, 0.3);
        }
        
        /* Platform badges */
        .platform-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
        }
        
        .platform-cinema { background: rgba(220, 38, 38, 0.2); border: 1px solid rgba(220, 38, 38, 0.4); }
        .platform-ott { background: rgba(34, 197, 94, 0.2); border: 1px solid rgba(34, 197, 94, 0.4); }
        .platform-digital { background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.4); }
        .platform-tv { background: rgba(168, 85, 247, 0.2); border: 1px solid rgba(168, 85, 247, 0.4); }
        
        /* Status badges */
        .status-badge {
            padding: 0.2rem 0.6rem;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .status-upcoming { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .status-released { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .status-production { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        
        /* Filter buttons */
        .filter-btn {
            transition: all 0.3s ease;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(251, 191, 36, 0.2);
        }
        
        .filter-btn.active {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #0f172a;
            border-color: #fbbf24;
        }
        
        /* Timeline */
        .timeline-item {
            position: relative;
            padding-left: 2rem;
            margin-bottom: 2rem;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 12px;
            height: 12px;
            background: #fbbf24;
            border-radius: 50%;
            border: 3px solid #0f172a;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 12px;
            width: 2px;
            height: calc(100% + 2rem);
            background: rgba(251, 191, 36, 0.3);
        }
        
        .timeline-item:last-child::after {
            display: none;
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            border-radius: 3px;
            transition: width 1.5s ease-in-out;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        /* Video thumbnail hover effect - DIPERBARUI */
        .video-thumbnail {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
        }
        
        .video-thumbnail img {
            transition: transform 0.5s ease, filter 0.5s ease;
        }
        
        .video-thumbnail:hover img {
            transform: scale(1.1);
            filter: brightness(0.6);
        }
        
        /* Trailer Card Hover Effect - BARU */
        .trailer-slide {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
        }
        
        .trailer-slide img {
            transition: all 0.5s ease;
        }
        
        .trailer-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            /* background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 50%, transparent 100%); */
            background: rgba(15, 23, 42, 0.90);
            padding: 1.5rem;
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .trailer-slide:hover .trailer-info {
            transform: translateY(0);
        }
        
        .trailer-play-btn {
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.3s ease 0.1s;
        }
        
        .trailer-slide:hover .trailer-play-btn {
            opacity: 1;
            transform: scale(1);
        }
        
        .trailer-play-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: rgba(251, 191, 36, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #0f172a;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 2;
        }
        
        .trailer-slide:hover .trailer-play-overlay {
            opacity: 1;
        }
        
        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        
        /* Aurora Effect */
        .aurora {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(123, 97, 255, 0.1), rgba(251, 191, 36, 0.1), rgba(59, 130, 246, 0.1));
            opacity: 0.3;
            z-index: -1;
            filter: blur(40px);
        }
    </style>

</head>
<body class="relative">

    <!-- Background dengan partikel dan efek cahaya -->
    <canvas id="particle-canvas"></canvas>
    <div class="aurora"></div>
    
    <!-- Header & Navigation -->
    <header class="glass-effect sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div class="flex items-center">
                    <!-- Gambar logo -->
                    <a href="index.html" class="flex items-center">
                        <img src="assets/images/logo-patrion.png" alt="Logo PATRION" class="w-full h-12">
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="index.html" class="nav-link text-white hover:text-fantasy-gold transition-colors">BERANDA</a>
                    <a href="program.html" class="nav-link text-white hover:text-fantasy-gold transition-colors">PROGRAM</a>
                    
                    <!-- Karakter Dropdown -->
                    <div class="relative group">
                        <a href="characters.html" class="nav-link text-white hover:text-fantasy-gold transition-colors flex items-center">
                            KARAKTER <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </a>
                        <div class="absolute left-[-60%] mt-2 w-56 glass-effect rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50 border border-fantasy-gold/20">
                            <div class="py-2 grid grid-cols-2 gap-1">
                                <a href="character-detail.html?character=kunna" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    KUNNA
                                </a>
                                <a href="character-detail.html?character=wabu" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    WABU
                                </a>
                                <a href="character-detail.html?character=asta" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    ASTA
                                </a>
                                <a href="character-detail.html?character=taran" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    TARAN
                                </a>
                                <a href="character-detail.html?character=sanu" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    SANU
                                </a>
                                <a href="character-detail.html?character=kabi" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    KABI
                                </a>
                                <a href="character-detail.html?character=arun" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    ARUN
                                </a>
                                <a href="character-detail.html?character=antis" class="flex items-center px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <div class="w-3 h-3 rounded-full bg-fire mr-2"></div>
                                    ANTIS
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Informasi Dropdown -->
                    <div class="relative group">
                        <a href="javascript:void(0);" class="nav-link text-white hover:text-fantasy-gold transition-colors flex items-center">
                            INFORMASI <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </a>
                        <div class="absolute left-[-80%] mt-2 w-48 glass-effect rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 border border-fantasy-gold/20">
                            <div class="py-2">
                                <a href="about.html" class="block px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">TENTANG PATRION</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Lainnya Dropdown -->
                    <div class="relative group">
                        <a href="javascript:void(0);" class="nav-link text-white hover:text-fantasy-gold transition-colors flex items-center">
                            LAINNYA <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </a>
                        <div class="absolute left-[-100%] mt-2 w-48 glass-effect rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 border border-fantasy-gold/20">
                            <div class="py-2">
                                <a href="javascript:void(0);" class="block px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">KOMIK</a>
                                <a href="javascript:void(0);" class="block px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">NOVEL</a>
                                <a href="javascript:void(0);" class="block px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">GAME</a>
                            </div>
                        </div>
                    </div>
                </nav>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>

            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="md:hidden mt-4 hidden glass-effect rounded-lg p-4 border border-fantasy-gold/20">
                <div class="flex flex-col space-y-3">
                    <a href="index.html" class="hover:text-fantasy-gold transition-colors py-2">BERANDA</a>
                    <a href="program.html" class="hover:text-fantasy-gold transition-colors py-2">PROGRAM</a>
                    
                    <div class="py-2">
                        <a href="characters.html" class="hover:text-fantasy-gold transition-colors font-semibold">KARAKTER</a>
                        <div class="mt-2 ml-4 grid grid-cols-2 gap-2">
                            <a href="character-detail.html?character=kunna" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                KUNNA
                            </a>
                            <a href="character-detail.html?character=wabu" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                WABU
                            </a>
                            <a href="character-detail.html?character=asta" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                ASTA
                            </a>
                            <a href="character-detail.html?character=taran" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                TARAN
                            </a>
                            <a href="character-detail.html?character=sanu" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                SANU
                            </a>
                            <a href="character-detail.html?character=kabi" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                KABI
                            </a>
                            <a href="character-detail.html?character=arun" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                ARUN
                            </a>
                            <a href="character-detail.html?character=antis" class="text-sm hover:text-fantasy-gold flex items-center">
                                <div class="w-2 h-2 rounded-full bg-fire mr-2"></div>
                                ANTIS
                            </a>
                        </div>
                    </div>
                    
                    <div class="py-2">
                        <a href="javascript:void(0);" class="hover:text-fantasy-gold transition-colors font-semibold">INFORMASI</a>
                        <div class="mt-2 ml-4 flex flex-col space-y-2">
                            <a href="about.html" class="text-sm hover:text-fantasy-gold">TENTANG PATRION</a>
                        </div>
                    </div>
                    
                    <div class="py-2">
                        <a href="javascript:void(0);" class="hover:text-fantasy-gold transition-colors font-semibold">LAINNYA</a>
                        <div class="mt-2 ml-4 flex flex-col space-y-2">
                            <a href="javascript:void(0);" class="text-sm hover:text-fantasy-gold">KOMIK</a>
                            <a href="javascript:void(0);" class="text-sm hover:text-fantasy-gold">NOVEL</a>
                            <a href="javascript:void(0);" class="text-sm hover:text-fantasy-gold">GAME</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative py-20 md:py-32 bg-fantasy-gradient overflow-hidden">
        <div class="absolute inset-0">
            <div class="absolute inset-0 bg-black/60"></div>
            <div class="absolute inset-0" style="background: radial-gradient(circle at 50% 50%, rgba(123, 97, 255, 0.1) 0%, transparent 50%);"></div>
        </div>
        
        <div class="container mx-auto px-4 relative z-10">
            <div class="max-w-7xl mx-auto text-center">
                <h1 class="fantasy-font text-5xl md:text-6xl font-bold text-white mb-6">
                    Program Holistik <span class="gold-text">PATRION</span>
                </h1>
                
                <p class="text-xl text-gray-300 mb-8 leading-relaxed">
                    Selamat datang di ekosistem konten multimedia terintegrasi dari alam semesta PATRION. 
                    Jelajahi berbagai platform dan format yang menghidupkan dunia fantasi Nusantara.
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="
                                const programList = document.getElementById('program-list');
                                const programListY = programList.getBoundingClientRect().top + window.scrollY - 60;
                                window.scrollTo({ top: programListY, behavior: 'smooth' });
                            "
                            class="bg-gold-gradient hover:opacity-90 text-fantasy-dark font-bold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg">
                        <i class="fas fa-play-circle mr-2"></i> Jelajahi Program
                    </button>
                    <button onclick="
                                const trailer = document.getElementById('trailers');
                                const trailerY = trailer.getBoundingClientRect().top + window.scrollY - 60;
                                window.scrollTo({ top: trailerY, behavior: 'smooth' });
                            "
                            class="border-2 border-fantasy-gold text-fantasy-gold hover:bg-fantasy-gold hover:text-fantasy-dark font-bold py-3 px-8 rounded-full transition-all">
                        <i class="fas fa-film mr-2"></i> Tonton Trailer
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Program Stats -->
    <section class="py-12 glass-effect">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div class="text-center">
                    <div class="text-4xl font-bold text-fantasy-gold mb-2">8+</div>
                    <div class="text-gray-400">Program Aktif</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl font-bold text-fantasy-gold mb-2">4</div>
                    <div class="text-gray-400">Platform</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl font-bold text-fantasy-gold mb-2">120+</div>
                    <div class="text-gray-400">Episode</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl font-bold text-fantasy-gold mb-2">5M+</div>
                    <div class="text-gray-400">Total Views</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Program Filters -->
    <section class="py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-wrap gap-3 justify-center mb-8">
                <button class="filter-btn active text-white py-2 px-6 rounded-full" data-filter="all">
                    Semua Program
                </button>
                <button class="filter-btn text-white py-2 px-6 rounded-full" data-filter="cinema">
                    <i class="fas fa-film mr-2"></i> Cinema
                </button>
                <button class="filter-btn text-white py-2 px-6 rounded-full" data-filter="ott">
                    <i class="fas fa-tv mr-2"></i> OTT/Streaming
                </button>
                <button class="filter-btn text-white py-2 px-6 rounded-full" data-filter="digital">
                    <i class="fas fa-globe mr-2"></i> Digital
                </button>
                <button class="filter-btn text-white py-2 px-6 rounded-full" data-filter="tv">
                    <i class="fas fa-satellite-dish mr-2"></i> TV
                </button>
            </div>
            
            <!-- Sort Options -->
            <div class="flex justify-end mb-6">
                <select id="sortSelect" class="glass-effect text-white py-2 px-4 rounded-lg border border-fantasy-gold/20">
                    <option value="release">Release Date</option>
                    <option value="popularity">Popularitas</option>
                    <option value="az">A-Z</option>
                    <option value="za">Z-A</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Program List -->
    <section id="program-list" class="py-16">
        <div class="container mx-auto px-4">
            <h2 class="section-title fantasy-font text-3xl font-bold text-center text-white">Semua Program</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 program-container">
                <!-- Program cards akan diisi oleh JavaScript -->
            </div>
        </div>
    </section>

    <!-- Featured Trailers - DIPERBARUI -->
    <section id="trailers" class="py-16 relative">
        <div class="absolute inset-0 bg-fantasy-gradient opacity-90"></div>
        <div class="container mx-auto px-4 relative z-10">
            <h2 class="section-title fantasy-font text-3xl font-bold text-center text-white">Trailer Eksklusif</h2>
            
            <div class="swiper trailers-swiper">
                <div class="swiper-wrapper">
                    <!-- Trailer slides akan diisi oleh JS -->
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
    </section>

    <!-- Release Roadmap -->
    <section id="roadmap" class="py-16">
        <div class="container mx-auto px-4">
            <h2 class="section-title fantasy-font text-3xl font-bold text-center text-white">Roadmap Release 2024-2025</h2>
            
            <div class="max-w-4xl mx-auto">
                <div class="timeline">
                    <!-- Timeline items will be populated by JS -->
                </div>
            </div>
        </div>
    </section>

    <!-- Production Studios -->
    <section id="production" class="py-16 relative overflow-hidden">
        <div class="absolute inset-0 bg-fantasy-dark opacity-95"></div>
        <div class="container mx-auto px-4 relative z-10">
            <h2 class="section-title fantasy-font text-3xl font-bold text-center text-white">Studio Produksi</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center p-6 rounded-xl bg-fantasy-dark/50 border border-fantasy-gold/20 hover:border-fantasy-gold/90 hover:shadow-lg hover:scale-105 transition-all duration-300">
                    <div class="text-fantasy-gold text-4xl mb-4">
                        <i class="fas fa-video"></i>
                    </div>
                    <h3 class="fantasy-font text-xl text-white mb-2">Patrion Animation Studio</h3>
                    <p class="text-gray-400">Spesialisasi dalam animasi 3D dan visual effects untuk seluruh konten PATRION.</p>
                </div>
                
                <div class="text-center p-6 rounded-xl bg-fantasy-dark/50 border border-fantasy-gold/20 hover:border-fantasy-gold/90 hover:shadow-lg hover:scale-105 transition-all duration-300">
                    <div class="text-fantasy-gold text-4xl mb-4">
                        <i class="fas fa-film"></i>
                    </div>
                    <h3 class="fantasy-font text-xl text-white mb-2">Nusantara Cinema</h3>
                    <p class="text-gray-400">Produksi film live action dengan teknologi cinematic terbaru.</p>
                </div>
                
                <div class="text-center p-6 rounded-xl bg-fantasy-dark/50 border border-fantasy-gold/20 hover:border-fantasy-gold/90 hover:shadow-lg hover:scale-105 transition-all duration-300">
                    <div class="text-fantasy-gold text-4xl mb-4">
                        <i class="fas fa-podcast"></i>
                    </div>
                    <h3 class="fantasy-font text-xl text-white mb-2">Digital Media Hub</h3>
                    <p class="text-gray-400">Produksi konten digital, podcast, dan motion graphics.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="glass-effect py-12 border-t border-fantasy-gold/20">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <img src="assets/images/logo-patrion.png" alt="Logo PATRION" class="h-12 mb-4">
                    <p class="text-gray-400 text-sm">
                        Dunia fantasi Nusantara dengan kekuatan elemen dan petualangan epik.
                    </p>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-fantasy-gold mb-4">Eksplorasi</h3>
                    <div class="flex flex-col space-y-2">
                        <a href="characters.html" class="text-gray-400 hover:text-fantasy-gold transition-colors">Karakter</a>
                        <a href="program.html" class="text-gray-400 hover:text-fantasy-gold transition-colors">Program</a>
                        <a href="index.html#wahana" class="text-gray-400 hover:text-fantasy-gold transition-colors">Wahana</a>
                    </div>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-fantasy-gold mb-4">Bantuan</h3>
                    <div class="flex flex-col space-y-2">
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Pusat Bantuan</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Komunitas</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Kontak</a>
                    </div>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-fantasy-gold mb-4">Terhubung</h3>
                    <div class="flex space-x-4 mb-4">
                        <a href="https://www.facebook.com/patrion.universe" target="_blank" class="text-gray-400 hover:text-fantasy-gold transition-colors text-xl">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.instagram.com/patrionofficial" target="_blank" class="text-gray-400 hover:text-fantasy-gold transition-colors text-xl">
                            <i class="fab fa-square-facebook"></i>
                        </a>
                        <a href="https://www.tiktok.com/@patrionofficial" target="_blank" class="text-gray-400 hover:text-fantasy-gold transition-colors text-xl">
                            <i class="fab fa-tiktok"></i>
                        </a>
                    </div>
                    <div class="text-sm text-gray-400">
                        <p>Email: info@patrion.com</p>
                        <p>Support: support@patrion.com</p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 pt-8 text-center">
                <p class="text-gray-400 text-sm">
                    "Karakter", "Artefak" dan "Alam Semesta Patrion" adalah merek dagang dari <span class="text-fantasy-gold">PATRION</span>.
                    Â© 2024 PATRION. All Rights Reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-black font-bold py-1 px-3 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Video Modal -->
    <div id="videoModal" class="fixed inset-0 bg-black/90 hidden z-50 flex items-center justify-center">
        <div class="relative w-[90%] max-w-4xl">
            <button id="closeModal" class="absolute -top-12 right-0 text-white text-2xl hover:text-fantasy-gold">
                <i class="fas fa-times"></i>
            </button>
            <div class="aspect-video bg-black rounded-lg overflow-hidden">
                <video id="modalVideo" class="w-full h-full" controls></video>
            </div>
            <div id="videoInfo" class="mt-4 text-white hidden">
                <h3 class="text-xl font-bold" id="videoTitle"></h3>
                <p class="text-gray-300" id="videoDesc"></p>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" rel="noopener noreferrer"></script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" rel="noopener noreferrer"></script>
    <!-- Custom JS -->
    <script src="assets/js/shared-api.js"></script>
    <script>
        function renderProgramCards(programsToRender) {
            const container = document.querySelector(".program-container");
            if (!container) return;

            container.innerHTML = "";

            programsToRender.forEach((program) => {
                const card = createProgramCard(program);
                container.appendChild(card);
            });

            // Add animation
            const cards = container.querySelectorAll(".program-card");
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add("fade-in");
            });
        }

        function createProgramCard(program) {
            const card = document.createElement("div");
            card.className = `program-card rounded-xl overflow-hidden cursor-pointer program-${program.platform || "digital"
                }`;
            card.dataset.id = program.id;
            card.dataset.platform = program.platform || "digital";
            card.dataset.status = program.status || "upcoming";

            // Status badge
            let statusClass = "";
            let statusText = "";
            switch ((program.status || "").toLowerCase()) {
                case "upcoming":
                    statusClass = "status-upcoming";
                    statusText = "Coming Soon";
                    break;
                case "released":
                    statusClass = "status-released";
                    statusText = "Released";
                    break;
                case "production":
                    statusClass = "status-production";
                    statusText = "In Production";
                    break;
                case "completed":
                    statusClass = "status-released";
                    statusText = "Completed";
                    break;
                default:
                    statusClass = "status-upcoming";
                    statusText = "Coming Soon";
            }

            // Platform badge
            let platformClass = "";
            let platformText = program.platform || "digital";
            switch ((program.platform || "").toLowerCase()) {
                case "cinema":
                    platformClass = "platform-cinema";
                    break;
                case "ott":
                case "streaming":
                    platformClass = "platform-ott";
                    break;
                case "digital":
                case "web":
                    platformClass = "platform-digital";
                    break;
                case "tv":
                    platformClass = "platform-tv";
                    break;
                default:
                    platformClass = "platform-digital";
            }

            // Get image URL
            const imageUrl = program.image
                ? program.image.startsWith("http")
                    ? program.image
                    : `https://cms.patrion.id/storage/${program.image}`
                : "assets/images/default-program.png";

            card.innerHTML = `
                <div class="video-thumbnail">
                    <img src="${imageUrl}" 
                        alt="${program.title || "Program PATRION"}" 
                        class="w-full h-48 object-cover"
                        loading="lazy"
                        onerror="this.src='assets/images/default-program.png'">
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-3">
                        <span class="${platformClass} platform-badge">${platformText.toUpperCase()}</span>
                        <span class="${statusClass} status-badge">${statusText}</span>
                    </div>
                    
                    <h3 class="fantasy-font text-lg text-white mb-2 line-clamp-2">${program.title || "Untitled Program"
                }</h3>
                    
                    ${program.description
                    ? `
                        <p class="text-gray-400 text-sm mb-4 line-clamp-2">${program.description}</p>
                    `
                    : ""
                }
                    
                    <div class="flex items-center justify-between text-sm text-gray-500 mb-4">
                        <div class="flex items-center">
                            <i class="far fa-calendar-alt mr-1"></i>
                            <span>${program.release_date ||
                program.releaseDate ||
                "Coming Soon"
                }</span>
                        </div>
                        ${program.episodes
                    ? `
                            <div class="flex items-center">
                                <i class="fas fa-list-ol mr-1"></i>
                                <span>${program.episodes} episode${program.episodes > 1 ? "s" : ""
                    }</span>
                            </div>
                        `
                    : ""
                }
                    </div>
                    
                    <div class="pt-4 border-t border-gray-800">
                        <div class="flex justify-between">
                            ${program.trailer
                    ? `
                                <button onclick="event.stopPropagation(); playTrailerBtn('${program.id}')" 
                                        class="text-fantasy-gold hover:text-yellow-300 text-sm font-medium">
                                    <i class="fas fa-play-circle mr-1"></i> Trailer
                                </button>
                            `
                    : `
                                <button class="text-gray-500 text-sm font-medium cursor-not-allowed" disabled>
                                    <i class="fas fa-play-circle mr-1"></i> No Trailer
                                </button>
                            `
                }
                            
                            <a href="program-detail.html?id=${program.id}" 
                            class="text-white hover:text-fantasy-gold text-sm font-medium">
                                Details <i class="fas fa-arrow-right ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            `;

            // Click event for card
            card.addEventListener("click", (e) => {
                if (!e.target.closest("button") && !e.target.closest("a")) {
                    window.location.href = `program-detail.html?id=${program.id}`;
                }
            });

            return card;
        }

        function setupEventListeners() {
            // Filter buttons
            document.querySelectorAll(".filter-btn").forEach((btn) => {
                btn.addEventListener("click", function () {
                    // Remove active class from all buttons
                    document
                        .querySelectorAll(".filter-btn")
                        .forEach((b) => b.classList.remove("active"));

                    // Add active class to clicked button
                    this.classList.add("active");

                    const filter = this.dataset.filter;
                    filterPrograms(filter);
                });
            });

            // Sort select
            const sortSelect = document.getElementById("sortSelect");
            if (sortSelect) {
                sortSelect.addEventListener("change", function () {
                    sortPrograms(this.value);
                });
            }

            // Video modal
            const videoModal = document.getElementById("videoModal");
            const closeModal = document.getElementById("closeModal");

            if (closeModal) {
                closeModal.addEventListener("click", () => {
                    const video = document.getElementById("modalVideo");
                    video.pause();
                    videoModal.classList.add("hidden");
                });
            }

            // Close modal on background click
            if (videoModal) {
                videoModal.addEventListener("click", (e) => {
                    if (e.target === videoModal) {
                        const video = document.getElementById("modalVideo");
                        video.pause();
                        videoModal.classList.add("hidden");
                    }
                });
            }
        }

        async function initializeTrailersSwiper(programs) {
            const trailerPrograms = programs
                .filter(
                    (p) =>
                        p.trailer &&
                        (p.status === "released" ||
                            p.status === "completed" ||
                            p.status === "ongoing" ||
                            p.status === "upcoming" ||
                            p.platform === "cinema" ||
                            p.platform === "tv" ||
                            p.platform === "ott" ||
                            p.platform === "movie" ||
                            p.platform === "digital" ||
                            p.platform === "podcast")
                )
                .slice(0, 9); // Limit to 6 trailers

            const swiperContainer = document.querySelector(
                ".trailers-swiper .swiper-wrapper"
            );
            if (!swiperContainer) return;

            if (trailerPrograms.length === 0) {
                swiperContainer.innerHTML = `
                    <div class="text-center py-12 text-gray-400">
                        <i class="fas fa-film text-4xl mb-4"></i>
                        <p>No trailers available yet</p>
                    </div>
                `;
                return;
            }

            swiperContainer.innerHTML = "";

            trailerPrograms.forEach((program) => {
                const slide = document.createElement("div");
                slide.className = "swiper-slide trailer-slide";

                const imageUrl = program.image
                    ? program.image.startsWith("http")
                        ? program.image
                        : `https://cms.patrion.id/storage/${program.image}`
                    : "assets/images/default-program.png";

                slide.innerHTML = `
                    <div class="relative rounded-xl overflow-hidden h-full">
                        <img src="${imageUrl}" 
                            alt="${program.title}" 
                            class="w-full h-64 object-cover"
                            loading="lazy"
                            onerror="this.src='assets/images/default-program.png'">
                        
                        <div class="trailer-info">
                            <h3 class="fantasy-font text-white text-lg mb-3 line-clamp-1">${program.title
                    }</h3>
                            <p class="text-gray-300 text-sm mb-4 line-clamp-2">${program.description || ""
                    }</p>
                            <div class="flex justify-between items-center">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs px-2 py-1 rounded bg-gray-800/70 text-gray-300">
                                        ${program.platform
                        ? program.platform.toUpperCase()
                        : "DIGITAL"
                    }
                                    </span>
                                    <span class="text-xs text-gray-400">
                                        <i class="far fa-calendar mr-1"></i>${program.release_date ||
                    program.releaseDate ||
                    "TBA"
                    }
                                    </span>
                                </div>
                                <button onclick="event.stopPropagation(); playTrailerBtn('${program.id
                    }')" 
                                        class="trailer-play-btn bg-fantasy-gold hover:bg-yellow-500 text-fantasy-dark font-bold py-2 px-4 rounded-full transition-all text-sm">
                                    <i class="fas fa-play mr-1"></i> Play
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                // Click event untuk seluruh slide
                slide.addEventListener("click", function (e) {
                    if (!e.target.closest("button")) {
                        playTrailerBtn(program.id);
                    }
                });

                swiperContainer.appendChild(slide);
            });

            // Initialize Swiper
            const trailersSwiper = new Swiper(".trailers-swiper", {
                loop: trailerPrograms.length > 3,
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
                speed: 800,
                grabCursor: true,
                spaceBetween: 20,
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                breakpoints: {
                    320: { slidesPerView: 1 },
                    640: { slidesPerView: 2 },
                    1024: { slidesPerView: 3 },
                    1280: { slidesPerView: 4 },
                },
            });

            // Pause autoplay saat hover
            trailersSwiper.el.addEventListener("mouseenter", () => {
                trailersSwiper.autoplay.stop();
            });

            trailersSwiper.el.addEventListener("mouseleave", () => {
                trailersSwiper.autoplay.start();
            });
        }

        function initializeRoadmapTimeline(programs) {
            const timelineContainer = document.querySelector(".timeline");
            if (!timelineContainer) return;

            timelineContainer.innerHTML = "";

            // Hardcoded timeline data sebagai fallback
            const timelineData = [
                {
                    quarter: "Q1 2024",
                    title: "Launch: Podcast Patrionia",
                    status: "completed",
                    progress: 100,
                },
                {
                    quarter: "Q2 2024",
                    title: "Release: Kunna Bercerita & Motion Graphics",
                    status: "completed",
                    progress: 100,
                },
                {
                    quarter: "Q3 2024",
                    title: "Launch: Animasi 3D Season 1 & Filler Series",
                    status: "completed",
                    progress: 100,
                },
                {
                    quarter: "Q4 2024",
                    title: "Release: Film Cinema & Motion Comics",
                    status: "in-progress",
                    progress: 65,
                },
                {
                    quarter: "Q1 2025",
                    title: "Launch: Travel Show & Animasi 3D Season 2",
                    status: "upcoming",
                    progress: 15,
                },
                {
                    quarter: "Q2 2025",
                    title: "Production: AR Experience & Mobile Game",
                    status: "upcoming",
                    progress: 0,
                },
            ];

            // Render timeline
            timelineData.forEach((item) => {
                const timelineItem = document.createElement("div");
                timelineItem.className = "timeline-item";

                timelineItem.innerHTML = `
                    <div class="bg-fantasy-dark/50 p-6 rounded-xl">
                        <div class="flex justify-between items-center mb-3">
                            <span class="fantasy-font text-fantasy-gold font-bold">${item.quarter
                    }</span>
                            <span class="text-sm px-3 py-1 rounded-full ${item.status === "completed"
                        ? "bg-green-900/30 text-green-400"
                        : item.status === "in-progress"
                            ? "bg-yellow-900/30 text-yellow-400"
                            : "bg-blue-900/30 text-blue-400"
                    }">
                                ${item.status === "completed"
                        ? "â Selesai"
                        : item.status === "in-progress"
                            ? "â³ Dalam Proses"
                            : "ðï¸ Mendatang"
                    }
                            </span>
                        </div>
                        <h4 class="text-white font-semibold mb-3">${item.title}</h4>
                        <div class="mt-4">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${item.progress
                    }%"></div>
                            </div>
                            <div class="text-right text-sm text-gray-400 mt-1">${item.progress
                    }%</div>
                        </div>
                    </div>
                `;

                timelineContainer.appendChild(timelineItem);
            });
        }

        function filterPrograms(filter) {
            if (!window.allPrograms) return;

            let filteredPrograms;

            if (filter === "all") {
                filteredPrograms = window.allPrograms;
            } else {
                filteredPrograms = window.allPrograms.filter(
                    (program) => program.platform?.toLowerCase() === filter.toLowerCase()
                );
            }

            renderProgramCards(filteredPrograms);
        }

        function sortPrograms(sortBy) {
            if (!window.allPrograms) return;

            let sortedPrograms = [...window.allPrograms];

            switch (sortBy) {
                case "release":
                    sortedPrograms.sort((a, b) => {
                        const dateA = a.release_date
                            ? new Date(a.release_date)
                            : new Date("9999-12-31");
                        const dateB = b.release_date
                            ? new Date(b.release_date)
                            : new Date("9999-12-31");
                        return dateA - dateB;
                    });
                    break;

                case "popularity":
                    sortedPrograms.sort((a, b) => {
                        const viewsA = parseViews(a.views || "0");
                        const viewsB = parseViews(b.views || "0");
                        return viewsB - viewsA;
                    });
                    break;

                case "az":
                    sortedPrograms.sort((a, b) =>
                        (a.title || "").localeCompare(b.title || "")
                    );
                    break;

                case "za":
                    sortedPrograms.sort((a, b) =>
                        (b.title || "").localeCompare(a.title || "")
                    );
                    break;
            }

            const activeFilter =
                document.querySelector(".filter-btn.active").dataset.filter;
            if (activeFilter !== "all") {
                sortedPrograms = sortedPrograms.filter(
                    (p) => p.platform?.toLowerCase() === activeFilter.toLowerCase()
                );
            }

            renderProgramCards(sortedPrograms);
        }

        function parseViews(viewData) {
            try {
                // Jika null/undefined
                if (viewData == null) return 0;
                
                // Jika sudah number
                if (typeof viewData === 'number') return viewData;
                
                // Jika string
                if (typeof viewData === 'string') {
                    // Remove any commas, spaces
                    const clean = viewData.replace(/,/g, '').replace(/\s/g, '');
                    
                    // Check for M (million) or K (thousand)
                    if (clean.toLowerCase().includes('m')) {
                        return parseFloat(clean) * 1000000;
                    }
                    if (clean.toLowerCase().includes('k')) {
                        return parseFloat(clean) * 1000;
                    }
                    
                    // Try to parse as number
                    const num = parseFloat(clean);
                    return isNaN(num) ? 0 : num;
                }
                
                // Untuk tipe data lain
                const num = Number(viewData);
                return isNaN(num) ? 0 : num;
                
            } catch (error) {
                console.warn('Error parsing views:', viewData, error);
                return 0;
            }
        }

        function updateProgramStats(programs) {
            try {
                // Update stats based on loaded programs
                const stats = {
                    active: programs.length,
                    platforms: new Set(programs.map(p => {
                        if (p.platform) return p.platform;
                        if (p.category) return p.category;
                        return 'digital';
                    }).filter(Boolean)).size,
                    episodes: programs.reduce((sum, p) => {
                        const eps = parseInt(p.episodes);
                        return sum + (isNaN(eps) ? 0 : eps);
                    }, 0),
                    totalViews: programs.reduce((sum, p) => {
                        return sum + parseViews(p.views);
                    }, 0)
                };
                
                console.log('Program stats calculated:', stats);
                
                // Find stat elements more robustly
                const statsSection = document.querySelector('.py-12.glass-effect');
                if (statsSection) {
                    const statDivs = statsSection.querySelectorAll('.text-center');
                    if (statDivs.length >= 4) {
                        statDivs[0].querySelector('.text-4xl').textContent = `${stats.active}+`;
                        statDivs[1].querySelector('.text-4xl').textContent = stats.platforms;
                        statDivs[2].querySelector('.text-4xl').textContent = `${stats.episodes}+`;
                        statDivs[3].querySelector('.text-4xl').textContent = `${formatViews(stats.totalViews)}+`;
                    }
                }
                
            } catch (error) {
                console.warn('Failed to update program stats:', error);
                // Don't crash the whole app if stats fail
            }
        }

        // Debug function untuk melihat data API
        function debugProgramData(programs) {
            console.log('=== DEBUG: Program Data from API ===');
            programs.forEach((program, index) => {
                console.log(`Program ${index + 1}:`, {
                    id: program.id,
                    title: program.title,
                    platform: program.platform,
                    status: program.status,
                    views: program.views,
                    episodes: program.episodes,
                    viewsType: typeof program.views,
                    viewsValue: program.views
                });
            });
            console.log('===================================');
        }

        function formatViews(views) {
            try {
                if (views >= 1000000) {
                    return `${(views / 1000000).toFixed(1)}M`;
                }
                if (views >= 1000) {
                    return `${(views / 1000).toFixed(1)}K`;
                }
                return views.toString();
            } catch (error) {
                console.warn('Error formatting views:', views, error);
                return '0';
            }
        }

        function playTrailerBtn(programId) {
            // Find program by ID from window.allPrograms
            const program = window.allPrograms?.find((p) => p.id == programId);

            if (!program || !program.trailer) {
                alert("Trailer not available for this program.");
                return;
            }

            const modal = document.getElementById("videoModal");
            const video = document.getElementById("modalVideo");
            const videoTitle = document.getElementById("videoTitle");
            const videoDesc = document.getElementById("videoDesc");
            const videoInfo = document.getElementById("videoInfo");

            const trailerUrl = program.trailer.startsWith("http")
                ? program.trailer
                : `https://cms.patrion.id/storage/${program.trailer}`;

            video.src = trailerUrl;
            videoTitle.textContent = program.title;
            videoDesc.textContent = program.description || "";

            videoInfo.classList.remove("hidden");
            modal.classList.remove("hidden");

            video.play().catch((e) => {
                console.error("Failed to play video:", e);
                alert("Unable to play trailer. Please try again.");
            });
        }

        function showEmptyState() {
            const container = document.querySelector(".program-container");
            if (container) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-16">
                        <i class="fas fa-film text-6xl text-gray-600 mb-4"></i>
                        <h3 class="fantasy-font text-2xl text-white mb-2">No Programs Yet</h3>
                        <p class="text-gray-400 mb-6">Stay tuned for upcoming PATRION programs!</p>
                        <button onclick="location.reload()" class="bg-fantasy-gold hover:bg-yellow-500 text-black font-bold py-2 px-6 rounded-full">
                            <i class="fas fa-sync-alt mr-2"></i> Refresh
                        </button>
                    </div>
                `;
            }
        }

        function showErrorState() {
            const container = document.querySelector(".program-container");
            if (container) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-16">
                        <i class="fas fa-exclamation-triangle text-6xl text-red-500 mb-4"></i>
                        <h3 class="fantasy-font text-2xl text-white mb-2">Failed to Load Programs</h3>
                        <p class="text-gray-400 mb-6">Unable to connect to the server. Please check your connection.</p>
                        <button onclick="location.reload()" class="bg-fantasy-gold hover:bg-yellow-500 text-black font-bold py-2 px-6 rounded-full">
                            <i class="fas fa-redo mr-2"></i> Try Again
                        </button>
                    </div>
                `;
            }
        }

        function initializeBackToTop() {
            const backToTopBtn = document.getElementById("backToTop");

            window.addEventListener("scroll", () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add("show");
                } else {
                    backToTopBtn.classList.remove("show");
                }
            });

            backToTopBtn.addEventListener("click", () => {
                window.scrollTo({
                    top: 0,
                    behavior: "smooth",
                });
            });
        }

        function setupMobileMenu() {
            const mobileMenuButton = document.getElementById("mobile-menu-button");
            const mobileMenu = document.getElementById("mobile-menu");

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener("click", function () {
                    mobileMenu.classList.toggle("hidden");
                });
            }
        }

        function initializeParticles() {
            const canvas = document.getElementById("particle-canvas");
            if (!canvas) return;

            const ctx = canvas.getContext("2d");

            // Set canvas size
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            // Particle array
            const particles = [];
            const particleCount = 100;

            // Create particles
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 1,
                    speedX: (Math.random() - 0.5) * 0.5,
                    speedY: (Math.random() - 0.5) * 0.5,
                    color: `rgba(${Math.floor(Math.random() * 100 + 155)}, ${Math.floor(
                        Math.random() * 100 + 155
                    )}, ${Math.floor(Math.random() * 255)}, ${Math.random() * 0.5 + 0.2})`,
                });
            }

            // Animation loop
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Update and draw particles
                particles.forEach((particle) => {
                    particle.x += particle.speedX;
                    particle.y += particle.speedY;

                    // Wrap around edges
                    if (particle.x < 0) particle.x = canvas.width;
                    if (particle.x > canvas.width) particle.x = 0;
                    if (particle.y < 0) particle.y = canvas.height;
                    if (particle.y > canvas.height) particle.y = 0;

                    // Draw particle
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    ctx.fillStyle = particle.color;
                    ctx.fill();
                });

                requestAnimationFrame(animate);
            }

            animate();

            // Resize handler
            window.addEventListener("resize", function () {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // API Functions
        async function fetchPrograms() {
            try {
                const response = await fetch(
                    "https://cms.patrion.id/api/v1/public/programs"
                );
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                const data = await response.json();

                // Extract data from response
                if (Array.isArray(data)) return data;
                if (data.data && Array.isArray(data.data)) return data.data;
                if (data.programs && Array.isArray(data.programs)) return data.programs;

                console.warn("Unknown API response format:", data);
                return [];
            } catch (error) {
                console.error("Failed to fetch programs:", error);
                return null;
            }
        }

        // Main initialization function
        async function initializeProgramPage() {
            try {
                console.log('Loading programs from API...');
                
                // Fetch programs from API
                const programs = await fetchPrograms();
                
                if (!programs) {
                    // Use hardcoded data as fallback
                    console.log('Using hardcoded data as fallback');
                    renderProgramCards(window.programs || []);
                    initializeTrailersSwiper(window.programs || []);
                    initializeRoadmapTimeline();
                    setupEventListeners();
                    return;
                }
                
                if (programs.length === 0) {
                    showEmptyState();
                    return;
                }
                
                console.log(`Loaded ${programs.length} programs from API`);
                
                // Debug detailed data structure
                console.log('Full API response sample:', JSON.stringify(programs[0], null, 2));
                
                // Check views property
                programs.forEach((p, i) => {
                    console.log(`Program ${i} views:`, {
                        value: p.views,
                        type: typeof p.views,
                        isNull: p.views === null,
                        isUndefined: p.views === undefined
                    });
                });
                
                // Store globally for filtering/sorting
                window.allPrograms = programs;
                
                // Render programs
                renderProgramCards(programs);
                
                // Setup event listeners
                setupEventListeners();
                
                // Initialize trailers swiper with API data
                initializeTrailersSwiper(programs);
                
                // Initialize roadmap timeline
                initializeRoadmapTimeline(programs);
                
                // Setup UI components
                initializeBackToTop();
                setupMobileMenu();
                initializeParticles();
                
                // Update stats dynamically (with try-catch)
                try {
                    updateProgramStats(programs);
                } catch (statsError) {
                    console.warn('Stats update failed, but continuing:', statsError);
                }
                
            } catch (error) {
                console.error('Failed to initialize program page:', error);
                showErrorState();
            }
        }

        // Event Listeners untuk fungsi global
        window.filterPrograms = filterPrograms;
        window.sortPrograms = sortPrograms;
        window.playTrailerBtn = playTrailerBtn;

        // Initialize when DOM is loaded
        document.addEventListener("DOMContentLoaded", function () {
            initializeProgramPage();
        });
    </script>
    
</body>
</html>