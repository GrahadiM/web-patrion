<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community PATRION - Komunitas Penggemar Nusantara</title>
    <meta name="description" content="Bergabunglah dengan komunitas PATRION! Diskusi komik, novel, game, dan segala hal tentang Nusantara bersama penggemar lainnya.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Community PATRION - Komunitas Penggemar Nusantara">
    <meta property="og:description" content="Tempat berkumpulnya para penggemar PATRION Universe untuk berdiskusi dan berbagi passion.">
    <meta property="og:image" content="assets/images/community/community-banner.jpg">
    <meta property="og:url" content="https://patrion.com/community.html">
    
    <!-- CSS & Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0f172a',
                        secondary: '#1e293b',
                        accent: '#ec4899', // Warna pink untuk community
                        'fantasy-blue': '#1e3a8a',
                        'fantasy-purple': '#7c3aed',
                        'fantasy-dark': '#0f172a',
                        'fantasy-gold': '#fbbf24',
                        // Warna untuk community
                        'community-primary': '#ec4899',
                        'community-secondary': '#f472b6',
                        'community-dark': '#0f172a',
                        // Warna kategori
                        'cat-discussion': '#3b82f6',
                        'cat-fanart': '#10b981',
                        'cat-fanfic': '#8b5cf6',
                        'cat-cosplay': '#ef4444',
                        'cat-news': '#f59e0b',
                        'cat-help': '#06b6d4'
                    },
                    backgroundImage: {
                        'fantasy-gradient': 'linear-gradient(135deg, #1e3a8a 0%, #ec4899 50%, #0f172a 100%)',
                        'community-gradient': 'linear-gradient(135deg, #ec4899 0%, #f472b6 100%)',
                        'post-gradient': 'linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) 100%)'
                    }
                }
            }
        }
    </script>
    <style>
        /* Import custom CSS */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* Base Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #e2e8f0;
            overflow-x: hidden;
        }
        
        .fantasy-font {
            font-family: 'Cinzel', serif;
        }
        
        .accent-text {
            background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Glass Effect */
        .glass-effect {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(236, 72, 153, 0.1);
        }
        
        /* Navigation Styles */
        .nav-link {
            position: relative;
            padding: 0.5rem 0;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #ec4899, #f472b6);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        /* Category badges */
        .category-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .category-badge:hover {
            transform: scale(1.05);
        }
        
        .badge-discussion { background: rgba(59, 130, 246, 0.2); color: #93c5fd; border: 1px solid rgba(59, 130, 246, 0.4); }
        .badge-fanart { background: rgba(16, 185, 129, 0.2); color: #6ee7b7; border: 1px solid rgba(16, 185, 129, 0.4); }
        .badge-fanfic { background: rgba(139, 92, 246, 0.2); color: #c4b5fd; border: 1px solid rgba(139, 92, 246, 0.4); }
        .badge-cosplay { background: rgba(239, 68, 68, 0.2); color: #fca5a5; border: 1px solid rgba(239, 68, 68, 0.4); }
        .badge-news { background: rgba(245, 158, 11, 0.2); color: #fde68a; border: 1px solid rgba(245, 158, 11, 0.4); }
        .badge-help { background: rgba(6, 182, 212, 0.2); color: #67e8f9; border: 1px solid rgba(6, 182, 212, 0.4); }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
            border-radius: 4px;
        }
        
        /* Post Card */
        .post-card {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 1px solid rgba(236, 72, 153, 0.1);
        }
        
        .post-card:hover {
            transform: translateY(-5px);
            border-color: rgba(236, 72, 153, 0.3);
            box-shadow: 0 10px 25px rgba(236, 72, 153, 0.2);
        }
        
        .post-image {
            position: relative;
            overflow: hidden;
            border-radius: 8px 8px 0 0;
            height: 200px;
        }
        
        .post-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .post-card:hover .post-image img {
            transform: scale(1.05);
        }
        
        /* Featured Banner */
        .featured-banner {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(30, 41, 59, 0.9)), 
                        url('assets/images/community/community-bg.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }
        
        /* User Avatar */
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .user-avatar.small {
            width: 32px;
            height: 32px;
            font-size: 0.8rem;
        }
        
        /* Stats Card */
        .stats-card {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(236, 72, 153, 0.1);
            transition: all 0.3s ease;
        }
        
        .stats-card:hover {
            border-color: rgba(236, 72, 153, 0.3);
            transform: translateY(-2px);
        }
        
        /* Discussion Card */
        .discussion-card {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(236, 72, 153, 0.1);
            transition: all 0.3s ease;
        }
        
        .discussion-card:hover {
            border-color: rgba(236, 72, 153, 0.3);
            transform: translateY(-2px);
        }
        
        /* Trending Topics */
        .trending-topic {
            padding: 12px 16px;
            border-radius: 8px;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(236, 72, 153, 0.1);
            transition: all 0.3s ease;
        }
        
        .trending-topic:hover {
            background: rgba(236, 72, 153, 0.1);
            border-color: rgba(236, 72, 153, 0.3);
        }
        
        /* Poll Card */
        .poll-card {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(236, 72, 153, 0.1);
        }
        
        .poll-option {
            padding: 12px;
            border-radius: 8px;
            background: rgba(30, 41, 59, 0.3);
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .poll-option:hover {
            background: rgba(236, 72, 153, 0.1);
        }
        
        .poll-option.selected {
            background: rgba(236, 72, 153, 0.2);
            border: 1px solid rgba(236, 72, 153, 0.4);
        }
        
        .poll-bar {
            height: 8px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 4px;
        }
        
        .poll-fill {
            height: 100%;
            background: linear-gradient(90deg, #ec4899, #f472b6);
            border-radius: 4px;
        }
        
        /* Create Post Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 20px;
        }
        
        .modal-content {
            background: rgba(30, 41, 59, 0.95);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(236, 72, 153, 0.2);
        }
        
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 18px;
            height: 18px;
            background: #ef4444;
            border-radius: 50%;
            font-size: 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        /* Search Box */
        .search-box {
            background: rgba(30, 41, 59, 0.7);
            border: 2px solid rgba(236, 72, 153, 0.3);
            border-radius: 50px;
            padding: 10px 20px;
            transition: all 0.3s ease;
        }
        
        .search-box:focus-within {
            border-color: rgba(236, 72, 153, 0.6);
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }
        
        /* Loading Animation */
        .loading-spinner {
            border: 3px solid rgba(236, 72, 153, 0.1);
            border-top: 3px solid #ec4899;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Aurora Effect */
        .aurora {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(236, 72, 153, 0.1), rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            opacity: 0.3;
            z-index: -1;
            filter: blur(40px);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }
        
        /* Reaction Buttons */
        .reaction-btn {
            display: flex;
            align-items: center;
            padding: 6px 12px;
            border-radius: 20px;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(236, 72, 153, 0.1);
            transition: all 0.3s ease;
        }
        
        .reaction-btn:hover {
            background: rgba(236, 72, 153, 0.1);
            border-color: rgba(236, 72, 153, 0.3);
        }
        
        .reaction-btn.active {
            background: rgba(236, 72, 153, 0.2);
            border-color: rgba(236, 72, 153, 0.4);
        }
        
        /* Event Card */
        .event-card {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(236, 72, 153, 0.1);
            transition: all 0.3s ease;
        }
        
        .event-card:hover {
            border-color: rgba(236, 72, 153, 0.3);
            transform: translateY(-2px);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .featured-banner {
                padding: 20px;
            }
            
            .post-image {
                height: 150px;
            }
            
            .modal-content {
                margin: 0 10px;
            }
        }
    </style>
</head>
<body class="relative">
    
    <!-- Background dengan efek cahaya -->
    <div class="aurora"></div>
    
    <!-- Header & Navigation -->
    <header class="glass-effect sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center">
                        <img src="assets/images/logo-patrion.png" alt="Logo PATRION" class="w-full h-12">
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="index.html" class="nav-link text-white hover:text-pink-300 transition-colors">BERANDA</a>
                    <a href="comics.html" class="nav-link text-white hover:text-pink-300 transition-colors">KOMIK</a>
                    <a href="novels.html" class="nav-link text-white hover:text-pink-300 transition-colors">NOVEL</a>
                    <a href="games.html" class="nav-link text-white hover:text-pink-300 transition-colors">GAME</a>
                    <a href="community.html" class="nav-link text-accent font-bold">KOMUNITAS</a>
                </nav>
                
                <!-- User Actions -->
                <div class="flex items-center space-x-4">
                    <!-- Notifications -->
                    <div class="relative">
                        <button onclick="toggleNotifications()" class="text-white hover:text-pink-300 transition-colors relative">
                            <i class="fas fa-bell text-xl"></i>
                            <div class="notification-badge" id="notificationCount">3</div>
                        </button>
                    </div>
                    
                    <!-- Messages -->
                    <div class="relative">
                        <button onclick="toggleMessages()" class="text-white hover:text-pink-300 transition-colors relative">
                            <i class="fas fa-envelope text-xl"></i>
                            <div class="notification-badge hidden" id="messageCount">5</div>
                        </button>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="relative group">
                        <button class="flex items-center space-x-2">
                            <div class="user-avatar small">AR</div>
                            <span class="text-white hidden md:inline">Arya</span>
                            <i class="fas fa-chevron-down text-gray-400 text-sm"></i>
                        </button>
                        <div class="absolute right-0 mt-2 w-48 glass-effect rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 border border-pink-500/20">
                            <div class="py-2">
                                <a href="profile.html" class="block px-4 py-2 hover:bg-pink-500/30 transition-colors">
                                    <i class="fas fa-user mr-2"></i> Profil Saya
                                </a>
                                <a href="my-posts.html" class="block px-4 py-2 hover:bg-pink-500/30 transition-colors">
                                    <i class="fas fa-file-alt mr-2"></i> Postingan Saya
                                </a>
                                <a href="settings.html" class="block px-4 py-2 hover:bg-pink-500/30 transition-colors">
                                    <i class="fas fa-cog mr-2"></i> Pengaturan
                                </a>
                                <div class="border-t border-gray-700 my-2"></div>
                                <a href="login.html" class="block px-4 py-2 hover:bg-pink-500/30 transition-colors text-red-300">
                                    <i class="fas fa-sign-out-alt mr-2"></i> Keluar
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="md:hidden mt-4 hidden glass-effect rounded-lg p-4 border border-pink-500/20">
                <div class="flex flex-col space-y-3">
                    <a href="index.html" class="hover:text-pink-300 transition-colors py-2">BERANDA</a>
                    <a href="comics.html" class="hover:text-pink-300 transition-colors py-2">KOMIK</a>
                    <a href="novels.html" class="hover:text-pink-300 transition-colors py-2">NOVEL</a>
                    <a href="games.html" class="hover:text-pink-300 transition-colors py-2">GAME</a>
                    <a href="community.html" class="text-pink-300 font-bold py-2">KOMUNITAS</a>
                    
                    <div class="pt-4 border-t border-gray-700">
                        <a href="profile.html" class="block py-2 hover:text-pink-300 transition-colors">
                            <i class="fas fa-user mr-2"></i> Profil Saya
                        </a>
                        <a href="my-posts.html" class="block py-2 hover:text-pink-300 transition-colors">
                            <i class="fas fa-file-alt mr-2"></i> Postingan Saya
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Hero Section -->
        <section class="mb-12">
            <div class="featured-banner p-8 md:p-12 mb-8">
                <div class="max-w-2xl">
                    <h1 class="fantasy-font text-3xl md:text-5xl text-white mb-4">
                        Selamat Datang di <span class="accent-text">Komunitas PATRION</span>
                    </h1>
                    <p class="text-gray-300 text-lg mb-6">
                        Tempat berkumpulnya para penggemar PATRION Universe! 
                        Diskusikan komik favorit, bagikan fanart, ikuti event seru, 
                        dan terhubung dengan penggemar lainnya dari seluruh dunia.
                    </p>
                    <div class="flex space-x-4">
                        <button onclick="openCreatePostModal()" 
                                class="bg-gradient-to-r from-pink-600 to-rose-600 hover:opacity-90 text-white font-bold py-3 px-6 rounded-full transition-all">
                            <i class="fas fa-plus mr-2"></i> Buat Postingan
                        </button>
                        <a href="#trending" 
                           class="border-2 border-pink-500 text-pink-300 hover:bg-pink-500/20 font-bold py-3 px-6 rounded-full transition-all">
                            <i class="fas fa-fire mr-2"></i> Lihat Trending
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Community Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-pink-500/20 flex items-center justify-center mr-3">
                            <i class="fas fa-users text-pink-300"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-white">50K+</p>
                            <p class="text-sm text-gray-400">Anggota</p>
                        </div>
                    </div>
                </div>
                
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center mr-3">
                            <i class="fas fa-comments text-blue-300"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-white">250K+</p>
                            <p class="text-sm text-gray-400">Diskusi</p>
                        </div>
                    </div>
                </div>
                
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center mr-3">
                            <i class="fas fa-paint-brush text-green-300"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-white">10K+</p>
                            <p class="text-sm text-gray-400">Karya Seni</p>
                        </div>
                    </div>
                </div>
                
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center mr-3">
                            <i class="fas fa-calendar-star text-yellow-300"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-white">100+</p>
                            <p class="text-sm text-gray-400">Event</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Left Sidebar - Navigation & Features -->
            <div class="lg:col-span-1">
                <div class="sticky top-24 space-y-6">
                    <!-- Quick Actions -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="fantasy-font text-xl text-white mb-4">Aksi Cepat</h3>
                        <div class="space-y-3">
                            <button onclick="openCreatePostModal()" 
                                    class="w-full bg-gradient-to-r from-pink-600 to-rose-600 hover:opacity-90 text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center">
                                <i class="fas fa-plus mr-2"></i> Posting Baru
                            </button>
                            <button onclick="joinEvent()" 
                                    class="w-full border-2 border-pink-500 text-pink-300 hover:bg-pink-500/20 font-bold py-3 rounded-lg transition-all flex items-center justify-center">
                                <i class="fas fa-calendar-plus mr-2"></i> Ikuti Event
                            </button>
                            <button onclick="createPoll()" 
                                    class="w-full border-2 border-blue-500 text-blue-300 hover:bg-blue-500/20 font-bold py-3 rounded-lg transition-all flex items-center justify-center">
                                <i class="fas fa-chart-bar mr-2"></i> Buat Polling
                            </button>
                        </div>
                    </div>
                    
                    <!-- Categories -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="fantasy-font text-xl text-white mb-4">Kategori</h3>
                        <div class="space-y-2">
                            <button class="category-badge badge-discussion w-full text-left" data-category="discussion">
                                <i class="fas fa-comments mr-2"></i> Diskusi Umum
                                <span class="ml-auto text-gray-400">(1.2K)</span>
                            </button>
                            <button class="category-badge badge-fanart w-full text-left" data-category="fanart">
                                <i class="fas fa-paint-brush mr-2"></i> Fan Art
                                <span class="ml-auto text-gray-400">(850)</span>
                            </button>
                            <button class="category-badge badge-fanfic w-full text-left" data-category="fanfic">
                                <i class="fas fa-book-open mr-2"></i> Fan Fiction
                                <span class="ml-auto text-gray-400">(620)</span>
                            </button>
                            <button class="category-badge badge-cosplay w-full text-left" data-category="cosplay">
                                <i class="fas fa-user-secret mr-2"></i> Cosplay
                                <span class="ml-auto text-gray-400">(310)</span>
                            </button>
                            <button class="category-badge badge-news w-full text-left" data-category="news">
                                <i class="fas fa-newspaper mr-2"></i> Berita & Update
                                <span class="ml-auto text-gray-400">(95)</span>
                            </button>
                            <button class="category-badge badge-help w-full text-left" data-category="help">
                                <i class="fas fa-question-circle mr-2"></i> Bantuan & FAQ
                                <span class="ml-auto text-gray-400">(180)</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Upcoming Events -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="fantasy-font text-xl text-white mb-4">Event Mendatang</h3>
                        <div class="space-y-4">
                            <div class="event-card p-4">
                                <div class="flex items-start mb-2">
                                    <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-pink-600 to-rose-600 flex items-center justify-center mr-3">
                                        <i class="fas fa-paint-brush text-white"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white text-sm">Fan Art Competition</h4>
                                        <p class="text-gray-400 text-xs">25-30 Mei 2024</p>
                                    </div>
                                </div>
                                <button onclick="joinEvent(1)" 
                                        class="w-full text-center bg-pink-500/20 hover:bg-pink-500/30 text-pink-300 py-2 rounded-lg text-sm transition-colors">
                                    Ikuti Event
                                </button>
                            </div>
                            
                            <div class="event-card p-4">
                                <div class="flex items-start mb-2">
                                    <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-600 flex items-center justify-center mr-3">
                                        <i class="fas fa-users text-white"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white text-sm">AMA Session with Creator</h4>
                                        <p class="text-gray-400 text-xs">5 Juni 2024</p>
                                    </div>
                                </div>
                                <button onclick="joinEvent(2)" 
                                        class="w-full text-center bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 py-2 rounded-lg text-sm transition-colors">
                                    Set Pengingat
                                </button>
                            </div>
                        </div>
                        
                        <button onclick="viewAllEvents()" 
                                class="w-full mt-4 text-center text-pink-300 hover:text-pink-200 transition-colors text-sm">
                            Lihat semua event <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                    
                    <!-- Community Leaders -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="fantasy-font text-xl text-white mb-4">Komunitas Teratas</h3>
                        <div class="space-y-3">
                            <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                                <div class="user-avatar small mr-3">KM</div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-white text-sm">Komik Mania</h4>
                                    <p class="text-gray-400 text-xs">12K anggota</p>
                                </div>
                                <button onclick="joinCommunity(1)" 
                                        class="text-xs bg-pink-500/20 hover:bg-pink-500/30 text-pink-300 px-3 py-1 rounded-full transition-colors">
                                    Gabung
                                </button>
                            </div>
                            
                            <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                                <div class="user-avatar small mr-3">FA</div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-white text-sm">Fan Art Indonesia</h4>
                                    <p class="text-gray-400 text-xs">8.5K anggota</p>
                                </div>
                                <button onclick="joinCommunity(2)" 
                                        class="text-xs bg-pink-500/20 hover:bg-pink-500/30 text-pink-300 px-3 py-1 rounded-full transition-colors">
                                    Gabung
                                </button>
                            </div>
                            
                            <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                                <div class="user-avatar small mr-3">GC</div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-white text-sm">Game Club</h4>
                                    <p class="text-gray-400 text-xs">15K anggota</p>
                                </div>
                                <button onclick="joinCommunity(3)" 
                                        class="text-xs bg-pink-500/20 hover:bg-pink-500/30 text-pink-300 px-3 py-1 rounded-full transition-colors">
                                    Gabung
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="lg:col-span-3">
                <!-- Trending Topics -->
                <section id="trending" class="mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="fantasy-font text-2xl text-white">
                            <i class="fas fa-fire text-orange-400 mr-2"></i> Topik Trending
                        </h2>
                        <button onclick="refreshTrending()" class="text-pink-300 hover:text-pink-200 transition-colors">
                            <i class="fas fa-sync-alt mr-1"></i> Refresh
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6" id="trendingTopics">
                        <!-- Trending topics will be populated by JavaScript -->
                    </div>
                </section>
                
                <!-- Featured Posts -->
                <section class="mb-12">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="fantasy-font text-2xl text-white">
                            <i class="fas fa-star text-yellow-400 mr-2"></i> Postingan Unggulan
                        </h2>
                        <a href="#" class="text-pink-300 hover:text-pink-200 transition-colors">
                            Lihat Semua <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="featuredPosts">
                        <!-- Featured posts will be populated by JavaScript -->
                    </div>
                </section>
                
                <!-- Latest Discussions -->
                <section class="mb-12">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="fantasy-font text-2xl text-white">Diskusi Terbaru</h2>
                        <div class="flex space-x-2">
                            <button onclick="filterDiscussions('all')" class="px-4 py-2 rounded-lg bg-pink-500/20 text-pink-300 text-sm">
                                Semua
                            </button>
                            <button onclick="filterDiscussions('following')" class="px-4 py-2 rounded-lg bg-gray-800 text-gray-300 hover:bg-gray-700 text-sm">
                                Yang Diikuti
                            </button>
                        </div>
                    </div>
                    
                    <!-- Search and Filter -->
                    <div class="mb-6">
                        <div class="search-box flex items-center mb-4">
                            <i class="fas fa-search text-gray-400 mr-2"></i>
                            <input type="text" 
                                   placeholder="Cari diskusi..." 
                                   class="bg-transparent border-none outline-none text-white w-full"
                                   id="discussionSearch"
                                   oninput="searchDiscussions()">
                        </div>
                        
                        <div class="flex flex-wrap gap-2 mb-4" id="activeFilters">
                            <!-- Active filters will be shown here -->
                        </div>
                    </div>
                    
                    <!-- Discussions List -->
                    <div class="space-y-4" id="discussionsList">
                        <!-- Discussions will be populated by JavaScript -->
                    </div>
                    
                    <!-- Loading Indicator -->
                    <div id="loadingIndicator" class="text-center py-8 hidden">
                        <div class="loading-spinner mx-auto mb-4"></div>
                        <p class="text-gray-400">Memuat diskusi...</p>
                    </div>
                    
                    <!-- Load More Button -->
                    <div class="text-center mt-8">
                        <button onclick="loadMoreDiscussions()" 
                                id="loadMoreBtn"
                                class="px-6 py-3 border-2 border-pink-500 text-pink-300 hover:bg-pink-500/20 font-semibold rounded-full transition-colors">
                            <i class="fas fa-sync-alt mr-2"></i> Muat Lebih Banyak
                        </button>
                    </div>
                </section>
                
                <!-- Community Poll -->
                <section class="mb-12">
                    <div class="poll-card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="fantasy-font text-xl text-white">Polling Komunitas</h3>
                            <span class="text-gray-400 text-sm">2 hari tersisa</span>
                        </div>
                        
                        <p class="text-gray-300 mb-6">Karakter mana dari PATRION Universe yang paling kamu sukai?</p>
                        
                        <div id="pollOptions">
                            <!-- Poll options will be populated by JavaScript -->
                        </div>
                        
                        <div class="mt-6 text-center">
                            <button onclick="submitVote()" 
                                    id="voteBtn"
                                    class="bg-gradient-to-r from-pink-600 to-rose-600 hover:opacity-90 text-white font-bold py-2 px-8 rounded-full transition-all">
                                Kirim Vote
                            </button>
                            <p class="text-gray-400 text-sm mt-2" id="totalVotes">Total 2,543 votes</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="glass-effect py-12 border-t border-pink-500/20 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <img src="assets/images/logo-patrion.png" alt="Logo PATRION" class="h-12 mb-4">
                    <p class="text-gray-400 text-sm">
                        Komunitas PATRION - Tempat berkumpulnya para patriot Nusantara untuk berbagi passion dan kreativitas.
                    </p>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-pink-300 mb-4">Komunitas</h3>
                    <div class="flex flex-col space-y-2">
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Guidelines</a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Moderator</a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Leaderboards</a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Events</a>
                    </div>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-pink-300 mb-4">Resources</h3>
                    <div class="flex flex-col space-y-2">
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Fan Art Gallery</a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Fan Fiction Archive</a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Cosplay Guides</a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors">Developer Blogs</a>
                    </div>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-pink-300 mb-4">Terhubung</h3>
                    <div class="flex space-x-4 mb-4">
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors text-xl">
                            <i class="fab fa-discord"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors text-xl">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors text-xl">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-pink-300 transition-colors text-xl">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                    <div class="text-sm text-gray-400">
                        <p>Email: community@patrion.com</p>
                        <p>Support: support@patrion.com</p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 pt-8 text-center">
                <p class="text-gray-400 text-sm">
                    "Komunitas PATRION" adalah platform eksklusif dari <span class="text-pink-300">PATRION Universe</span>.
                    Â© 2024 PATRION. All Rights Reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="fixed bottom-8 right-8 bg-gradient-to-r from-pink-600 to-rose-600 hover:opacity-90 text-white font-bold p-3 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 opacity-0 invisible">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Create Post Modal -->
    <div id="createPostModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="fantasy-font text-2xl text-white">Buat Postingan Baru</h3>
                    <button onclick="closeCreatePostModal()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <form id="postForm">
                    <div class="mb-6">
                        <label class="block text-gray-300 mb-2">Judul Postingan</label>
                        <input type="text" 
                               id="postTitle"
                               class="w-full glass-effect text-white py-3 px-4 rounded-lg border border-gray-700 focus:border-pink-500 focus:outline-none"
                               placeholder="Judul yang menarik..."
                               required>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-300 mb-2">Konten</label>
                        <div class="bg-gray-800/50 rounded-lg p-4 mb-2">
                            <div class="flex space-x-2 mb-4">
                                <button type="button" onclick="formatText('bold')" class="p-2 rounded hover:bg-gray-700">
                                    <i class="fas fa-bold"></i>
                                </button>
                                <button type="button" onclick="formatText('italic')" class="p-2 rounded hover:bg-gray-700">
                                    <i class="fas fa-italic"></i>
                                </button>
                                <button type="button" onclick="formatText('link')" class="p-2 rounded hover:bg-gray-700">
                                    <i class="fas fa-link"></i>
                                </button>
                                <button type="button" onclick="insertImage()" class="p-2 rounded hover:bg-gray-700">
                                    <i class="fas fa-image"></i>
                                </button>
                            </div>
                            <textarea id="postContent"
                                      class="w-full bg-transparent text-white outline-none min-h-[200px]"
                                      placeholder="Apa yang ingin kamu bagikan?..."
                                      required></textarea>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-300 mb-2">Kategori</label>
                        <div class="flex flex-wrap gap-2" id="categorySelection">
                            <!-- Categories will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-300 mb-2">Tag (maksimal 5)</label>
                        <div class="flex flex-wrap gap-2 mb-2" id="selectedTags">
                            <!-- Selected tags will be shown here -->
                        </div>
                        <input type="text" 
                               id="tagInput"
                               class="w-full glass-effect text-white py-3 px-4 rounded-lg border border-gray-700 focus:border-pink-500 focus:outline-none"
                               placeholder="Tekan enter untuk menambahkan tag..."
                               onkeypress="addTag(event)">
                        <div class="text-gray-400 text-sm mt-2">Contoh: #patrion #fanart #kunna</div>
                    </div>
                    
                    <div class="flex justify-end space-x-4">
                        <button type="button" onclick="closeCreatePostModal()" 
                                class="px-6 py-3 border border-gray-600 text-gray-400 hover:text-white hover:border-gray-500 rounded-lg transition-colors">
                            Batal
                        </button>
                        <button type="submit" 
                                class="bg-gradient-to-r from-pink-600 to-rose-600 hover:opacity-90 text-white font-bold py-3 px-8 rounded-lg transition-all">
                            <i class="fas fa-paper-plane mr-2"></i> Publikasikan
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notificationsPanel" class="fixed top-16 right-4 w-80 glass-effect rounded-lg shadow-lg border border-pink-500/20 hidden z-50">
        <div class="p-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="fantasy-font text-white">Notifikasi</h3>
                <button onclick="markAllAsRead()" class="text-pink-300 hover:text-pink-200 text-sm">
                    Tandai semua dibaca
                </button>
            </div>
            <div class="space-y-3 max-h-[400px] overflow-y-auto" id="notificationsList">
                <!-- Notifications will be populated by JavaScript -->
            </div>
            <div class="text-center mt-4">
                <a href="notifications.html" class="text-pink-300 hover:text-pink-200 text-sm">
                    Lihat semua notifikasi
                </a>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Community Data
        const communityData = {
            trendingTopics: [
                { id: 1, title: "Chapter terbaru PATRION ada plot twist!", category: "discussion", replies: 245, views: "1.2K", trending: true },
                { id: 2, title: "Cosplay Kunna terbaik 2024", category: "cosplay", replies: 189, views: "850", trending: true },
                { id: 3, title: "Fan art competition diumumkan!", category: "fanart", replies: 156, views: "720", trending: true },
                { id: 4, title: "Teori tentang karakter misterius", category: "discussion", replies: 98, views: "540", trending: false }
            ],
            featuredPosts: [
                { 
                    id: 1, 
                    title: "Koleksi Fan Art Kunna Digital Painting", 
                    author: "SariArt", 
                    category: "fanart", 
                    likes: 420, 
                    comments: 85, 
                    image: "assets/images/community/fanart-1.jpg",
                    description: "Kumpulan digital painting karakter Kunna yang sudah saya buat selama 6 bulan terakhir."
                },
                { 
                    id: 2, 
                    title: "Analisis Karakter: Journey of Malik", 
                    author: "StoryAnalyst", 
                    category: "discussion", 
                    likes: 310, 
                    comments: 67, 
                    image: "assets/images/community/analysis-1.jpg",
                    description: "Deep dive tentang perkembangan karakter Malik dari antagonist menjadi complex villain."
                },
                { 
                    id: 3, 
                    title: "Cosplay Kirana di Anime Convention", 
                    author: "CosplayQueen", 
                    category: "cosplay", 
                    likes: 580, 
                    comments: 124, 
                    image: "assets/images/community/cosplay-1.jpg",
                    description: "Pengalaman cosplay sebagai Kirana di convention kemarin. Lihat detail kostumnya!"
                }
            ],
            discussions: [
                { 
                    id: 1, 
                    title: "Prediksi Chapter 45: Konfrontasi Akhir?", 
                    author: "FanPredictor", 
                    category: "discussion", 
                    replies: 45, 
                    views: "1.2K", 
                    lastActivity: "2 jam lalu",
                    tags: ["patrion", "prediksi", "spoiler"],
                    pinned: true,
                    hot: true
                },
                { 
                    id: 2, 
                    title: "Tutorial Digital Painting: Elemental Effects", 
                    author: "ArtTutor", 
                    category: "fanart", 
                    replies: 28, 
                    views: "850", 
                    lastActivity: "5 jam lalu",
                    tags: ["tutorial", "digitalart", "elemental"],
                    pinned: false,
                    hot: true
                },
                { 
                    id: 3, 
                    title: "Fan Fiction: Alternate Ending Chapter 1", 
                    author: "WriterDream", 
                    category: "fanfic", 
                    replies: 32, 
                    views: "720", 
                    lastActivity: "1 hari lalu",
                    tags: ["fanfic", "alternate", "chapter1"],
                    pinned: false,
                    hot: false
                },
                { 
                    id: 4, 
                    title: "Cosplay Tips: Making Kunna's Armor", 
                    author: "CosplayPro", 
                    category: "cosplay", 
                    replies: 19, 
                    views: "540", 
                    lastActivity: "2 hari lalu",
                    tags: ["cosplay", "tutorial", "armor"],
                    pinned: false,
                    hot: false
                },
                { 
                    id: 5, 
                    title: "Bug Report: Guardian of Fire Game", 
                    author: "GamerTest", 
                    category: "help", 
                    replies: 12, 
                    views: "320", 
                    lastActivity: "3 hari lalu",
                    tags: ["bug", "game", "report"],
                    pinned: false,
                    hot: false
                }
            ],
            notifications: [
                { id: 1, title: "Postingan Anda mendapat 15 likes baru", time: "5 menit lalu", read: false, type: "like" },
                { id: 2, title: "Ada 3 komentar baru di diskusi Anda", time: "1 jam lalu", read: false, type: "comment" },
                { id: 3, title: "Fan Art Competition dimulai besok!", time: "3 jam lalu", read: true, type: "event" },
                { id: 4, title: "User ArtTutor mengikuti Anda", time: "1 hari lalu", read: true, type: "follow" }
            ],
            poll: {
                question: "Karakter mana dari PATRION Universe yang paling kamu sukai?",
                options: [
                    { id: 1, text: "Kunna - Guardian of Fire", votes: 854, percentage: 35 },
                    { id: 2, text: "Kirana - Guardian of Water", votes: 620, percentage: 25 },
                    { id: 3, text: "Malik - Shadow Clan Leader", votes: 489, percentage: 20 },
                    { id: 4, text: "Ki Suryo - Mentor", votes: 365, percentage: 15 },
                    { id: 5, text: "Lainnya", votes: 215, percentage: 9 }
                ],
                totalVotes: 2543,
                userVoted: false
            },
            categories: [
                { id: "discussion", name: "Diskusi Umum", icon: "fa-comments", color: "blue" },
                { id: "fanart", name: "Fan Art", icon: "fa-paint-brush", color: "green" },
                { id: "fanfic", name: "Fan Fiction", icon: "fa-book-open", color: "purple" },
                { id: "cosplay", name: "Cosplay", icon: "fa-user-secret", color: "red" },
                { id: "news", name: "Berita & Update", icon: "fa-newspaper", color: "yellow" },
                { id: "help", name: "Bantuan & FAQ", icon: "fa-question-circle", color: "cyan" }
            ]
        };

        // State Variables
        let currentDiscussionPage = 1;
        const discussionsPerPage = 5;
        let filteredDiscussions = [...communityData.discussions];
        let activeCategory = 'all';
        let searchQuery = '';
        let userTags = [];
        let selectedPollOption = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializeCommunityPage();
            setupEventListeners();
            renderTrendingTopics();
            renderFeaturedPosts();
            renderDiscussions();
            renderPoll();
            renderCategories();
            renderNotifications();
        });

        // Initialize Community Page
        function initializeCommunityPage() {
            updateNotificationCount();
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Mobile menu toggle
            document.getElementById('mobile-menu-button').addEventListener('click', function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            });

            // Category filters
            document.querySelectorAll('.category-badge').forEach(badge => {
                badge.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    if (category === activeCategory) {
                        activeCategory = 'all';
                    } else {
                        activeCategory = category;
                    }
                    filterDiscussions();
                    updateActiveCategory();
                });
            });

            // Back to top button
            const backToTopBtn = document.getElementById('backToTop');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 300) {
                    backToTopBtn.classList.remove('opacity-0', 'invisible');
                    backToTopBtn.classList.add('opacity-100', 'visible');
                } else {
                    backToTopBtn.classList.remove('opacity-100', 'visible');
                    backToTopBtn.classList.add('opacity-0', 'invisible');
                }
            });

            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Post form submission
            document.getElementById('postForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitPost();
            });

            // Click outside notifications panel
            document.addEventListener('click', function(event) {
                const panel = document.getElementById('notificationsPanel');
                if (panel && !panel.classList.contains('hidden')) {
                    if (!event.target.closest('#notificationsPanel') && 
                        !event.target.closest('button[onclick="toggleNotifications()"]')) {
                        panel.classList.add('hidden');
                    }
                }
            });

            // Click outside modal
            document.addEventListener('click', function(event) {
                const modal = document.getElementById('createPostModal');
                if (modal && !modal.classList.contains('hidden')) {
                    if (event.target === modal) {
                        closeCreatePostModal();
                    }
                }
            });

            // ESC key to close modals
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeCreatePostModal();
                    const panel = document.getElementById('notificationsPanel');
                    if (panel && !panel.classList.contains('hidden')) {
                        panel.classList.add('hidden');
                    }
                }
            });
        }

        // Render Trending Topics
        function renderTrendingTopics() {
            const container = document.getElementById('trendingTopics');
            if (!container) return;

            container.innerHTML = communityData.trendingTopics.map(topic => `
                <div class="trending-topic fade-in">
                    <div class="flex items-start mb-2">
                        <div class="w-10 h-10 rounded-full bg-pink-500/20 flex items-center justify-center mr-3">
                            <i class="fas fa-fire text-pink-300"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-white">${topic.title}</h4>
                            <div class="flex items-center mt-1">
                                <span class="text-xs ${getCategoryClass(topic.category)} mr-3">
                                    ${getCategoryName(topic.category)}
                                </span>
                                <span class="text-xs text-gray-400">
                                    <i class="fas fa-comment mr-1"></i> ${topic.replies}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-400">${topic.views} views</span>
                        <button onclick="viewTopic(${topic.id})" 
                                class="text-pink-300 hover:text-pink-200 transition-colors">
                            Lihat <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Render Featured Posts
        function renderFeaturedPosts() {
            const container = document.getElementById('featuredPosts');
            if (!container) return;

            container.innerHTML = communityData.featuredPosts.map(post => `
                <div class="post-card fade-in">
                    <div class="post-image">
                        <div class="h-full bg-gradient-to-r from-pink-900/30 to-rose-900/30 flex items-center justify-center">
                            <div class="text-center p-4">
                                <div class="text-4xl mb-3 text-pink-300">
                                    <i class="${getCategoryIcon(post.category)}"></i>
                                </div>
                                <h3 class="fantasy-font text-white text-lg">${post.title}</h3>
                            </div>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex items-center mb-3">
                            <div class="user-avatar small mr-3">${post.author.substring(0, 2)}</div>
                            <div>
                                <h4 class="font-semibold text-white text-sm">${post.author}</h4>
                                <span class="text-xs ${getCategoryClass(post.category)}">
                                    ${getCategoryName(post.category)}
                                </span>
                            </div>
                        </div>
                        
                        <p class="text-gray-300 text-sm mb-4 line-clamp-2">${post.description}</p>
                        
                        <div class="flex justify-between items-center text-sm text-gray-400">
                            <div class="flex space-x-4">
                                <span><i class="fas fa-heart mr-1"></i> ${post.likes}</span>
                                <span><i class="fas fa-comment mr-1"></i> ${post.comments}</span>
                            </div>
                            <button onclick="viewPost(${post.id})" 
                                    class="text-pink-300 hover:text-pink-200 transition-colors text-sm">
                                Baca <i class="fas fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Render Discussions
        function renderDiscussions() {
            const container = document.getElementById('discussionsList');
            if (!container) return;

            // Calculate start and end index
            const startIndex = (currentDiscussionPage - 1) * discussionsPerPage;
            const endIndex = startIndex + discussionsPerPage;
            const discussionsToShow = filteredDiscussions.slice(startIndex, endIndex);

            if (discussionsToShow.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-comments text-4xl text-gray-600 mb-4"></i>
                        <h3 class="text-xl text-white mb-2">Tidak ada diskusi ditemukan</h3>
                        <p class="text-gray-400">Coba ubah filter pencarian Anda</p>
                    </div>
                `;
                document.getElementById('loadMoreBtn').classList.add('hidden');
                return;
            }

            // Clear container for new page
            if (currentDiscussionPage === 1) {
                container.innerHTML = '';
            }

            discussionsToShow.forEach(discussion => {
                const discussionCard = document.createElement('div');
                discussionCard.className = 'discussion-card p-4 fade-in';
                discussionCard.innerHTML = `
                    <div class="flex items-start mb-3">
                        <div class="user-avatar small mr-3">${discussion.author.substring(0, 2)}</div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-semibold text-white mb-1">${discussion.title}</h3>
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="text-xs ${getCategoryClass(discussion.category)}">
                                            ${getCategoryName(discussion.category)}
                                        </span>
                                        <span class="text-xs text-gray-400">oleh ${discussion.author}</span>
                                    </div>
                                </div>
                                <div class="flex space-x-1">
                                    ${discussion.pinned ? `
                                        <span class="text-xs bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded-full">
                                            <i class="fas fa-thumbtack mr-1"></i> Pinned
                                        </span>
                                    ` : ''}
                                    ${discussion.hot ? `
                                        <span class="text-xs bg-red-500/20 text-red-300 px-2 py-1 rounded-full">
                                            <i class="fas fa-fire mr-1"></i> Hot
                                        </span>
                                    ` : ''}
                                </div>
                            </div>
                            
                            <div class="flex flex-wrap gap-1 mb-3">
                                ${discussion.tags.map(tag => `
                                    <span class="text-xs bg-gray-800 text-gray-300 px-2 py-1 rounded-full">
                                        #${tag}
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center text-sm text-gray-400">
                        <div class="flex space-x-4">
                            <span><i class="fas fa-comment mr-1"></i> ${discussion.replies} balasan</span>
                            <span><i class="fas fa-eye mr-1"></i> ${discussion.views}</span>
                        </div>
                        <div class="flex items-center space-x-4">
                            <span>${discussion.lastActivity}</span>
                            <button onclick="viewDiscussion(${discussion.id})" 
                                    class="text-pink-300 hover:text-pink-200 transition-colors">
                                Lihat <i class="fas fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(discussionCard);
            });

            // Show/hide load more button
            if (filteredDiscussions.length > currentDiscussionPage * discussionsPerPage) {
                document.getElementById('loadMoreBtn').classList.remove('hidden');
            } else {
                document.getElementById('loadMoreBtn').classList.add('hidden');
            }
        }

        // Render Poll
        function renderPoll() {
            const container = document.getElementById('pollOptions');
            if (!container) return;

            container.innerHTML = communityData.poll.options.map(option => `
                <div class="poll-option ${selectedPollOption === option.id ? 'selected' : ''}" 
                     onclick="selectPollOption(${option.id})">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-white">${option.text}</span>
                        ${communityData.poll.userVoted ? `
                            <span class="text-pink-300 text-sm">${option.percentage}%</span>
                        ` : ''}
                    </div>
                    ${communityData.poll.userVoted ? `
                        <div class="poll-bar">
                            <div class="poll-fill" style="width: ${option.percentage}%"></div>
                        </div>
                    ` : ''}
                </div>
            `).join('');

            // Update total votes
            document.getElementById('totalVotes').textContent = `Total ${communityData.poll.totalVotes.toLocaleString()} votes`;
            
            // Update vote button
            const voteBtn = document.getElementById('voteBtn');
            if (communityData.poll.userVoted) {
                voteBtn.textContent = 'Sudah Vote';
                voteBtn.disabled = true;
                voteBtn.classList.remove('from-pink-600', 'to-rose-600', 'hover:opacity-90');
                voteBtn.classList.add('bg-gray-700', 'text-gray-400', 'cursor-not-allowed');
            } else {
                voteBtn.textContent = 'Kirim Vote';
                voteBtn.disabled = false;
                voteBtn.classList.remove('bg-gray-700', 'text-gray-400', 'cursor-not-allowed');
                voteBtn.classList.add('from-pink-600', 'to-rose-600', 'hover:opacity-90');
            }
        }

        // Render Categories
        function renderCategories() {
            const container = document.getElementById('categorySelection');
            if (!container) return;

            container.innerHTML = communityData.categories.map(category => `
                <label class="flex items-center cursor-pointer">
                    <input type="radio" name="category" value="${category.id}" class="mr-2" 
                           ${category.id === 'discussion' ? 'checked' : ''}>
                    <span class="text-gray-300">${category.name}</span>
                </label>
            `).join('');
        }

        // Render Notifications
        function renderNotifications() {
            const container = document.getElementById('notificationsList');
            if (!container) return;

            container.innerHTML = communityData.notifications.map(notification => `
                <div class="p-3 bg-gray-800/50 rounded-lg ${notification.read ? '' : 'border-l-4 border-pink-500'}">
                    <div class="flex items-start">
                        <div class="w-8 h-8 rounded-full bg-pink-500/20 flex items-center justify-center mr-3">
                            <i class="fas fa-${getNotificationIcon(notification.type)} text-pink-300 text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-white text-sm">${notification.title}</p>
                            <p class="text-gray-400 text-xs mt-1">${notification.time}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Filter Discussions
        function filterDiscussions(filter = 'all') {
            if (filter === 'following') {
                // In real app, filter by followed users/topics
                filteredDiscussions = communityData.discussions.filter(d => d.hot);
            } else {
                filteredDiscussions = communityData.discussions.filter(discussion => {
                    // Category filter
                    const matchesCategory = activeCategory === 'all' || discussion.category === activeCategory;
                    
                    // Search filter
                    const matchesSearch = searchQuery === '' || 
                        discussion.title.toLowerCase().includes(searchQuery) ||
                        discussion.author.toLowerCase().includes(searchQuery) ||
                        discussion.tags.some(tag => tag.includes(searchQuery));
                    
                    return matchesCategory && matchesSearch;
                });
            }
            
            // Reset to first page
            currentDiscussionPage = 1;
            
            // Update UI
            renderDiscussions();
            updateActiveFilters();
        }

        // Search Discussions
        function searchDiscussions() {
            searchQuery = document.getElementById('discussionSearch').value.toLowerCase();
            filterDiscussions();
        }

        // Update Active Filters
        function updateActiveFilters() {
            const container = document.getElementById('activeFilters');
            if (!container) return;

            container.innerHTML = '';
            
            if (activeCategory !== 'all') {
                container.innerHTML += `
                    <span class="px-3 py-1 rounded-full text-sm ${getCategoryClass(activeCategory)}">
                        ${getCategoryName(activeCategory)}
                        <button onclick="clearCategoryFilter()" class="ml-2">
                            <i class="fas fa-times"></i>
                        </button>
                    </span>
                `;
            }
            
            if (searchQuery !== '') {
                container.innerHTML += `
                    <span class="px-3 py-1 rounded-full text-sm bg-gray-800 text-gray-300">
                        Search: "${searchQuery}"
                        <button onclick="clearSearch()" class="ml-2">
                            <i class="fas fa-times"></i>
                        </button>
                    </span>
                `;
            }
        }

        // Update Active Category
        function updateActiveCategory() {
            document.querySelectorAll('.category-badge').forEach(badge => {
                const category = badge.getAttribute('data-category');
                if (category === activeCategory) {
                    badge.classList.add('ring-2', 'ring-pink-500');
                } else {
                    badge.classList.remove('ring-2', 'ring-pink-500');
                }
            });
        }

        // Load More Discussions
        function loadMoreDiscussions() {
            const loadingIndicator = document.getElementById('loadingIndicator');
            loadingIndicator.classList.remove('hidden');
            document.getElementById('loadMoreBtn').classList.add('hidden');
            
            // Simulate loading delay
            setTimeout(() => {
                currentDiscussionPage++;
                renderDiscussions();
                loadingIndicator.classList.add('hidden');
                
                // Scroll to new discussions
                const container = document.getElementById('discussionsList');
                const newCards = container.querySelectorAll('.fade-in');
                if (newCards.length > 0) {
                    newCards[newCards.length - 1].scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }, 1000);
        }

        // Poll Functions
        function selectPollOption(optionId) {
            if (communityData.poll.userVoted) return;
            selectedPollOption = optionId;
            renderPoll();
        }

        function submitVote() {
            if (!selectedPollOption || communityData.poll.userVoted) {
                showNotification('Pilih opsi terlebih dahulu', 'error');
                return;
            }
            
            // In real app, send to server
            communityData.poll.userVoted = true;
            communityData.poll.totalVotes++;
            
            // Update selected option votes
            const option = communityData.poll.options.find(o => o.id === selectedPollOption);
            if (option) {
                option.votes++;
                
                // Recalculate percentages
                const totalVotes = communityData.poll.options.reduce((sum, o) => sum + o.votes, 0);
                communityData.poll.options.forEach(o => {
                    o.percentage = Math.round((o.votes / totalVotes) * 100);
                });
            }
            
            renderPoll();
            showNotification('Vote Anda telah dikirim!', 'success');
        }

        // Create Post Functions
        function openCreatePostModal() {
            document.getElementById('createPostModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeCreatePostModal() {
            document.getElementById('createPostModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Reset form
            document.getElementById('postForm').reset();
            userTags = [];
            renderSelectedTags();
        }

        function formatText(format) {
            const textarea = document.getElementById('postContent');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            let formattedText = '';
            switch(format) {
                case 'bold':
                    formattedText = `**${selectedText}**`;
                    break;
                case 'italic':
                    formattedText = `*${selectedText}*`;
                    break;
                case 'link':
                    formattedText = `[${selectedText}](url)`;
                    break;
            }
            
            textarea.value = textarea.value.substring(0, start) + formattedText + textarea.value.substring(end);
            textarea.focus();
            textarea.setSelectionRange(start + formattedText.length, start + formattedText.length);
        }

        function insertImage() {
            const url = prompt('Masukkan URL gambar:');
            if (url) {
                const textarea = document.getElementById('postContent');
                const start = textarea.selectionStart;
                const insertText = `![deskripsi gambar](${url})`;
                textarea.value = textarea.value.substring(0, start) + insertText + textarea.value.substring(start);
            }
        }

        function addTag(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                const tagInput = document.getElementById('tagInput');
                const tag = tagInput.value.trim().toLowerCase();
                
                if (tag && !userTags.includes(tag) && userTags.length < 5) {
                    userTags.push(tag);
                    renderSelectedTags();
                    tagInput.value = '';
                }
            }
        }

        function renderSelectedTags() {
            const container = document.getElementById('selectedTags');
            if (!container) return;

            container.innerHTML = userTags.map(tag => `
                <span class="px-3 py-1 rounded-full text-sm bg-pink-500/20 text-pink-300">
                    #${tag}
                    <button onclick="removeTag('${tag}')" class="ml-2">
                        <i class="fas fa-times"></i>
                    </button>
                </span>
            `).join('');
        }

        function removeTag(tag) {
            userTags = userTags.filter(t => t !== tag);
            renderSelectedTags();
        }

        function submitPost() {
            const title = document.getElementById('postTitle').value.trim();
            const content = document.getElementById('postContent').value.trim();
            const category = document.querySelector('input[name="category"]:checked').value;
            
            if (!title || !content) {
                showNotification('Judul dan konten harus diisi', 'error');
                return;
            }
            
            // In real app, send to server
            const newPost = {
                id: communityData.discussions.length + 1,
                title: title,
                author: "Anda",
                category: category,
                replies: 0,
                views: "0",
                lastActivity: "Baru saja",
                tags: userTags,
                pinned: false,
                hot: false
            };
            
            communityData.discussions.unshift(newPost);
            
            // Close modal and show success
            closeCreatePostModal();
            showNotification('Postingan berhasil dipublikasikan!', 'success');
            
            // Refresh discussions
            filterDiscussions();
        }

        // Notification Functions
        function toggleNotifications() {
            const panel = document.getElementById('notificationsPanel');
            panel.classList.toggle('hidden');
            
            // Mark as read when opened
            if (!panel.classList.contains('hidden')) {
                markAllAsRead();
            }
        }

        function toggleMessages() {
            // Navigate to messages page
            window.location.href = 'messages.html';
        }

        function updateNotificationCount() {
            const unreadCount = communityData.notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notificationCount');
            
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        function markAllAsRead() {
            communityData.notifications.forEach(n => n.read = true);
            renderNotifications();
            updateNotificationCount();
        }

        // Event Functions
        function joinEvent(eventId = null) {
            if (eventId) {
                showNotification(`Anda telah bergabung dengan event #${eventId}`, 'success');
            } else {
                showNotification('Membuka halaman events...', 'info');
                // In real app, navigate to events page
            }
        }

        function viewAllEvents() {
            showNotification('Membuka semua events...', 'info');
        }

        function joinCommunity(communityId) {
            showNotification(`Bergabung dengan komunitas #${communityId}`, 'success');
        }

        function refreshTrending() {
            showNotification('Trending topics diperbarui!', 'success');
        }

        function viewTopic(topicId) {
            showNotification(`Membuka topik #${topicId}`, 'info');
        }

        function viewPost(postId) {
            showNotification(`Membuka postingan #${postId}`, 'info');
        }

        function viewDiscussion(discussionId) {
            showNotification(`Membuka diskusi #${discussionId}`, 'info');
            // In real app, navigate to discussion detail
        }

        function createPoll() {
            showNotification('Membuat polling baru...', 'info');
        }

        function clearCategoryFilter() {
            activeCategory = 'all';
            filterDiscussions();
            updateActiveCategory();
        }

        function clearSearch() {
            document.getElementById('discussionSearch').value = '';
            searchQuery = '';
            filterDiscussions();
        }

        // Utility Functions
        function getCategoryClass(category) {
            const categoryClasses = {
                discussion: 'badge-discussion',
                fanart: 'badge-fanart',
                fanfic: 'badge-fanfic',
                cosplay: 'badge-cosplay',
                news: 'badge-news',
                help: 'badge-help'
            };
            return categoryClasses[category] || 'badge-discussion';
        }

        function getCategoryName(category) {
            const categoryNames = {
                discussion: 'Diskusi',
                fanart: 'Fan Art',
                fanfic: 'Fan Fiction',
                cosplay: 'Cosplay',
                news: 'Berita',
                help: 'Bantuan'
            };
            return categoryNames[category] || 'Diskusi';
        }

        function getCategoryIcon(category) {
            const categoryIcons = {
                discussion: 'fas fa-comments',
                fanart: 'fas fa-paint-brush',
                fanfic: 'fas fa-book-open',
                cosplay: 'fas fa-user-secret',
                news: 'fas fa-newspaper',
                help: 'fas fa-question-circle'
            };
            return categoryIcons[category] || 'fas fa-comments';
        }

        function getNotificationIcon(type) {
            const icons = {
                like: 'heart',
                comment: 'comment',
                event: 'calendar-star',
                follow: 'user-plus'
            };
            return icons[type] || 'bell';
        }

        // Show Notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'} mr-3 
                       ${type === 'success' ? 'text-green-400' : 'text-red-400'}"></i>
                    <span class="text-white">${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
                notification.classList.add('translate-x-0');
            }, 10);
            
            setTimeout(() => {
                notification.classList.remove('translate-x-0');
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Initialize infinite scroll for discussions
        window.addEventListener('scroll', function() {
            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
            
            if (scrollTop + clientHeight >= scrollHeight - 100) {
                if (filteredDiscussions.length > currentDiscussionPage * discussionsPerPage) {
                    loadMoreDiscussions();
                }
            }
        });

    </script>
</body>
</html>