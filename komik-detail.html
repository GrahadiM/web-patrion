<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baca Komik PATRION: Kebangkitan Api Nusantara</title>
    <meta name="description" content="Baca komik PATRION: Kebangkitan Api Nusantara Chapter 1 online gratis. Petualangan epik Kunna, Guardian of Fire.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Baca Komik PATRION: Kebangkitan Api Nusantara">
    <meta property="og:description" content="Petualangan epik Kunna, Guardian of Fire dalam komik digital berkualitas tinggi">
    <meta property="og:image" content="assets/images/comics/comic-1.jpg">
    <meta property="og:url" content="https://patrion.com/comic-detail?id=1">
    
    <!-- CSS & Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0f172a',
                        secondary: '#1e293b',
                        accent: '#fbbf24',
                        'fantasy-blue': '#1e3a8a',
                        'fantasy-purple': '#5b21b6',
                        'fantasy-dark': '#0f172a',
                        'fantasy-gold': '#fbbf24',
                        // Warna elemen berdasarkan karakter
                        fire: '#dc2626',
                        wind: '#94a3b8',
                        water: '#3b82f6',
                        earth: '#d97706',
                        thunder: '#7c3aed',
                        nature: '#16a34a',
                        light: '#fde047',
                        dark: '#1e293b'
                    },
                    backgroundImage: {
                        'fantasy-gradient': 'linear-gradient(135deg, #1e3a8a 0%, #5b21b6 50%, #0f172a 100%)',
                        'gold-gradient': 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        /* Comic Reader */
        .comic-reader {
            background: #000;
            min-height: 100vh;
        }
        
        .comic-page {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .comic-page img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        /* Reader Controls */
        .reader-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.9);
            border: 2px solid rgba(251, 191, 36, 0.3);
            border-radius: 50px;
            padding: 10px 20px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
        }
        
        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            color: #fbbf24;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: rgba(251, 191, 36, 0.3);
            transform: scale(1.1);
        }
        
        .control-btn.active {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #0f172a;
        }
        
        .page-indicator {
            min-width: 100px;
            text-align: center;
            font-weight: 600;
            color: #fbbf24;
        }
        
        /* Reading Progress */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(30, 41, 59, 0.5);
            z-index: 9999;
        }
        
        .reading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Chapter List */
        .chapter-item {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(251, 191, 36, 0.1);
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .chapter-item:hover {
            background: rgba(251, 191, 36, 0.1);
            border-color: rgba(251, 191, 36, 0.3);
        }
        
        .chapter-item.current {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(30, 41, 59, 0.8));
            border-color: rgba(251, 191, 36, 0.5);
        }
        
        /* Comment Section */
        .comment-card {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(251, 191, 36, 0.1);
            border-radius: 12px;
        }
        
        .comment-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0f172a;
            font-weight: bold;
        }
        
        /* Rating */
        .rating-stars {
            color: #fbbf24;
        }
        
        /* Comic Info */
        .comic-cover {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(251, 191, 36, 0.3);
        }
        
        /* Genre badges */
        .genre-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .badge-action { background: rgba(220, 38, 38, 0.2); color: #fca5a5; border: 1px solid rgba(220, 38, 38, 0.4); }
        .badge-fantasy { background: rgba(168, 85, 247, 0.2); color: #c4b5fd; border: 1px solid rgba(168, 85, 247, 0.4); }
        .badge-adventure { background: rgba(251, 191, 36, 0.2); color: #fde68a; border: 1px solid rgba(251, 191, 36, 0.4); }
        
        /* Action buttons */
        .action-btn {
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
        }
        
        /* Reader modes */
        .reader-mode-single {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .reader-mode-double {
            max-width: 1800px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .reader-controls {
                padding: 8px 15px;
                gap: 10px;
            }
            
            .control-btn {
                width: 35px;
                height: 35px;
            }
            
            .page-indicator {
                min-width: 80px;
                font-size: 0.9rem;
            }
            
            .reader-mode-double {
                grid-template-columns: 1fr;
            }
        }
        
        /* Loading */
        .loading-spinner {
            border: 3px solid rgba(251, 191, 36, 0.1);
            border-top: 3px solid #fbbf24;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="relative">

    <!-- Background dengan partikel dan efek cahaya -->
    <canvas id="particle-canvas"></canvas>
    <div class="aurora"></div>
    
    <!-- Reading Progress Bar -->
    <div class="reading-progress">
        <div class="reading-progress-bar" id="readingProgress"></div>
    </div>
    
    <!-- Header & Navigation -->
    <header class="glass-effect sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center">
                        <img src="assets/images/logo-patrion.png" alt="Logo PATRION" class="w-full h-12">
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="index.html" class="nav-link text-white hover:text-fantasy-gold transition-colors">BERANDA</a>
                    <a href="komik.html" class="nav-link text-white hover:text-fantasy-gold transition-colors">KOMIK</a>
                    
                    <!-- Chapter Navigation -->
                    <div class="flex items-center space-x-4">
                        <button onclick="previousChapter()" class="control-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span class="text-white font-medium" id="currentChapter">Chapter 1</span>
                        <button onclick="nextChapter()" class="control-btn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <!-- Reader Settings -->
                    <div class="relative group">
                        <button class="nav-link text-white hover:text-fantasy-gold transition-colors flex items-center">
                            <i class="fas fa-cog mr-2"></i> SETTINGS
                        </button>
                        <div class="absolute right-0 mt-2 w-48 glass-effect rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 border border-fantasy-gold/20">
                            <div class="py-2">
                                <button onclick="changeReaderMode('single')" class="block w-full text-left px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <i class="fas fa-file-image mr-2"></i> Single Page
                                </button>
                                <button onclick="changeReaderMode('double')" class="block w-full text-left px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <i class="fas fa-columns mr-2"></i> Double Page
                                </button>
                                <div class="border-t border-gray-700 my-2"></div>
                                <button onclick="toggleDarkMode()" class="block w-full text-left px-4 py-2 hover:bg-fantasy-purple/30 transition-colors">
                                    <i class="fas fa-moon mr-2"></i> Dark Mode
                                </button>
                            </div>
                        </div>
                    </div>
                </nav>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="md:hidden mt-4 hidden glass-effect rounded-lg p-4 border border-fantasy-gold/20">
                <div class="flex flex-col space-y-3">
                    <a href="index.html" class="hover:text-fantasy-gold transition-colors py-2">BERANDA</a>
                    <a href="komik.html" class="hover:text-fantasy-gold transition-colors py-2">KOMIK</a>
                    
                    <div class="py-2">
                        <div class="flex justify-between items-center">
                            <button onclick="previousChapter()" class="control-btn">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span class="text-white font-medium" id="mobileCurrentChapter">Chapter 1</span>
                            <button onclick="nextChapter()" class="control-btn">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="py-2">
                        <button onclick="changeReaderMode('single')" class="block w-full text-left hover:text-fantasy-gold transition-colors py-2">
                            <i class="fas fa-file-image mr-2"></i> Single Page
                        </button>
                        <button onclick="changeReaderMode('double')" class="block w-full text-left hover:text-fantasy-gold transition-colors py-2">
                            <i class="fas fa-columns mr-2"></i> Double Page
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Comic Info Section -->
    <section class="py-8 glass-effect">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-start gap-6">
                <div class="md:w-1/4">
                    <div class="comic-cover">
                        <img src="assets/images/comics/comic-1.jpg" alt="Comic Cover" class="w-full">
                    </div>
                </div>
                
                <div class="md:w-3/4">
                    <div class="flex flex-wrap items-center gap-2 mb-4">
                        <span class="badge-action genre-badge">ACTION</span>
                        <span class="badge-fantasy genre-badge">FANTASY</span>
                        <span class="badge-adventure genre-badge">ADVENTURE</span>
                        <span class="text-gray-400">•</span>
                        <span class="text-green-400">
                            <i class="fas fa-sync-alt mr-1"></i> Ongoing
                        </span>
                    </div>
                    
                    <h1 class="fantasy-font text-3xl md:text-4xl text-white mb-2">
                        PATRION: Kebangkitan Api Nusantara
                    </h1>
                    
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="flex items-center">
                            <div class="rating-stars mr-2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-gray-300">4.7 (2.5K ratings)</span>
                        </div>
                        <span class="text-gray-400">•</span>
                        <span class="text-gray-300">
                            <i class="far fa-eye mr-1"></i> 250K views
                        </span>
                    </div>
                    
                    <p class="text-gray-300 mb-6 leading-relaxed">
                        Kunna, Guardian of Fire, harus menghadapi ancaman baru yang mengancam keseimbangan alam. 
                        Dengan kekuatan api Nusantara, dia memulai perjalanan epik untuk menemukan artefak kuno 
                        yang dapat menyelamatkan dunia dari kehancuran. Bergabunglah dengan Kunna dalam petualangan 
                        penuh aksi dan misteri melintasi kepulauan Nusantara.
                    </p>
                    
                    <div class="flex flex-wrap gap-3 mb-6">
                        <div class="flex items-center">
                            <i class="fas fa-user-pen text-fantasy-gold mr-2"></i>
                            <span class="text-gray-300">Author: <span class="text-white">Abdurrahman GM</span></span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-paintbrush text-fantasy-gold mr-2"></i>
                            <span class="text-gray-300">Artist: <span class="text-white">Siti Nurhaliza</span></span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-calendar text-fantasy-gold mr-2"></i>
                            <span class="text-gray-300">Updated: <span class="text-white">2 hari lalu</span></span>
                        </div>
                    </div>
                    
                    <div class="flex flex-wrap gap-3">
                        <button onclick="startReading()" 
                                class="action-btn bg-gold-gradient hover:opacity-90 text-fantasy-dark font-bold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg">
                            <i class="fas fa-play mr-2"></i> Baca Sekarang
                        </button>
                        <button onclick="toggleBookmark()" 
                                class="action-btn border-2 border-fantasy-gold text-fantasy-gold hover:bg-fantasy-gold hover:text-fantasy-dark font-bold py-3 px-8 rounded-full transition-all" id="bookmarkBtn">
                            <i class="far fa-bookmark mr-2"></i> Simpan
                        </button>
                        <button onclick="toggleLike()" 
                                class="action-btn border-2 border-red-500 text-red-500 hover:bg-red-500 hover:text-white font-bold py-3 px-8 rounded-full transition-all" id="likeBtn">
                            <i class="far fa-heart mr-2"></i> Suka
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Left Sidebar - Chapter List -->
            <div class="lg:col-span-1">
                <div class="glass-effect rounded-xl p-6 sticky top-24">
                    <h3 class="fantasy-font text-xl text-white mb-4">Daftar Chapter</h3>
                    
                    <div class="space-y-2 max-h-[500px] overflow-y-auto pr-2" id="chapterList">
                        <!-- Chapters will be populated by JavaScript -->
                    </div>
                    
                    <div class="mt-6">
                        <h4 class="fantasy-font text-lg text-white mb-3">Status</h4>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Total Chapter</span>
                                <span class="text-white font-semibold">15</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Terakhir Update</span>
                                <span class="text-white">2 hari lalu</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Pembaca Aktif</span>
                                <span class="text-green-400">5.2K</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content - Comic Reader/Info -->
            <div class="lg:col-span-3">
                <div id="readerSection" class="hidden">
                    <!-- Comic Reader will be shown here -->
                    <div class="comic-reader" id="comicReader">
                        <div class="comic-page" id="pageContainer">
                            <!-- Pages will be loaded here -->
                            <div class="text-center py-20">
                                <div class="loading-spinner mx-auto mb-4"></div>
                                <p class="text-gray-400">Memuat halaman komik...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reader Controls -->
                    <div class="reader-controls" id="readerControls">
                        <button onclick="firstPage()" class="control-btn">
                            <i class="fas fa-fast-backward"></i>
                        </button>
                        <button onclick="previousPage()" class="control-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        
                        <div class="page-indicator">
                            <span id="currentPage">1</span> / <span id="totalPages">24</span>
                        </div>
                        
                        <button onclick="nextPage()" class="control-btn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button onclick="lastPage()" class="control-btn">
                            <i class="fas fa-fast-forward"></i>
                        </button>
                        
                        <div class="h-6 w-px bg-gray-600"></div>
                        
                        <button onclick="zoomIn()" class="control-btn">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <button onclick="zoomOut()" class="control-btn">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <button onclick="toggleFullscreen()" class="control-btn">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Info Section (Default) -->
                <div id="infoSection">
                    <div class="glass-effect rounded-xl p-6 mb-8">
                        <h3 class="fantasy-font text-2xl text-white mb-4">Sinopsis</h3>
                        <div class="prose prose-invert max-w-none">
                            <p class="text-gray-300 mb-4">
                                Dalam "Kebangkitan Api Nusantara", kita mengikuti perjalanan Kunna, seorang pemuda biasa 
                                yang menemukan dirinya memiliki kekuatan mengendalikan api setelah sebuah insiden misterius 
                                di gunung berapi aktif.
                            </p>
                            <p class="text-gray-300 mb-4">
                                Dengan bimbingan seorang mentor misterius, Kunna belajar menguasai kekuatannya sambil 
                                menyelidiki hilangnya artefak kuno yang dapat mengembalikan keseimbangan alam Nusantara. 
                                Namun, organisasi jahat "Shadow Clan" juga mengincar artefak tersebut untuk tujuan yang 
                                gelap.
                            </p>
                            <p class="text-gray-300">
                                Dari hutan belantara Kalimantan hingga puncak gunung di Papua, Kunna harus menghadapi 
                                berbagai tantangan dan musuh yang kuat demi menyelamatkan Nusantara dari kehancuran.
                            </p>
                        </div>
                    </div>
                    
                    <!-- Characters in this comic -->
                    <div class="glass-effect rounded-xl p-6 mb-8">
                        <h3 class="fantasy-font text-2xl text-white mb-4">Karakter dalam Komik</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-red-600 to-orange-500 mr-3 flex items-center justify-center">
                                    <i class="fas fa-fire text-white"></i>
                                </div>
                                <div>
                                    <h4 class="fantasy-font text-white">KUNNA</h4>
                                    <p class="text-gray-400 text-sm">Guardian of Fire</p>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-800/50 rounded-lg">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-600 to-cyan-500 mr-3 flex items-center justify-center">
                                    <i class="fas fa-water text-white"></i>
                                </div>
                                <div>
                                    <h4 class="fantasy-font text-white">ASTA</h4>
                                    <p class="text-gray-400 text-sm">Guardian of Water</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chapter Preview -->
                    <div class="glass-effect rounded-xl p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="fantasy-font text-2xl text-white">Preview Chapter</h3>
                            <button onclick="startReading()" 
                                    class="bg-gold-gradient hover:opacity-90 text-fantasy-dark font-bold py-2 px-6 rounded-full transition-all">
                                <i class="fas fa-play mr-2"></i> Baca Semua
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="chapterPreviews">
                            <!-- Chapter previews will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Comments Section -->
                <div class="glass-effect rounded-xl p-6 mt-8">
                    <h3 class="fantasy-font text-2xl text-white mb-6">Komentar Pembaca</h3>
                    
                    <!-- Comment Form -->
                    <div class="mb-8">
                        <textarea id="commentInput" 
                                  class="w-full glass-effect text-white py-3 px-4 rounded-lg border border-gray-700 focus:border-fantasy-gold focus:outline-none mb-3"
                                  rows="3"
                                  placeholder="Bagikan pendapat Anda tentang komik ini..."></textarea>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-400 text-sm">Rating:</span>
                                <div class="rating-stars" id="commentRating">
                                    <i class="far fa-star" data-rating="1"></i>
                                    <i class="far fa-star" data-rating="2"></i>
                                    <i class="far fa-star" data-rating="3"></i>
                                    <i class="far fa-star" data-rating="4"></i>
                                    <i class="far fa-star" data-rating="5"></i>
                                </div>
                            </div>
                            <button onclick="submitComment()" 
                                    class="bg-gold-gradient hover:opacity-90 text-fantasy-dark font-bold py-2 px-6 rounded-full transition-all">
                                <i class="fas fa-paper-plane mr-2"></i> Kirim
                            </button>
                        </div>
                    </div>
                    
                    <!-- Comments List -->
                    <div class="space-y-6" id="commentsList">
                        <!-- Comments will be populated by JavaScript -->
                        <div class="text-center py-8 text-gray-400">
                            <i class="fas fa-comments text-3xl mb-3"></i>
                            <p>Jadilah yang pertama berkomentar!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="glass-effect py-12 border-t border-fantasy-gold/20 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <img src="assets/images/logo-patrion.png" alt="Logo PATRION" class="h-12 mb-4">
                    <p class="text-gray-400 text-sm">
                        Platform komik digital PATRION - Petualangan epik para Patriot Nusantara.
                    </p>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-fantasy-gold mb-4">Navigasi</h3>
                    <div class="flex flex-col space-y-2">
                        <a href="komik.html" class="text-gray-400 hover:text-fantasy-gold transition-colors">Semua Komik</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Populer</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Terbaru</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Genre</a>
                    </div>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-fantasy-gold mb-4">Bantuan</h3>
                    <div class="flex flex-col space-y-2">
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Cara Membaca</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">FAQ</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Komunitas</a>
                        <a href="javascript:void(0);" class="text-gray-400 hover:text-fantasy-gold transition-colors">Kontak</a>
                    </div>
                </div>
                
                <div>
                    <h3 class="fantasy-font text-fantasy-gold mb-4">Terhubung</h3>
                    <div class="flex space-x-4 mb-4">
                        <a href="https://www.facebook.com/patrion.universe" target="_blank" class="text-gray-400 hover:text-fantasy-gold transition-colors text-xl">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.instagram.com/patrionofficial" target="_blank" class="text-gray-400 hover:text-fantasy-gold transition-colors text-xl">
                            <i class="fab fa-square-facebook"></i>
                        </a>
                        <a href="https://www.tiktok.com/@patrionofficial" target="_blank" class="text-gray-400 hover:text-fantasy-gold transition-colors text-xl">
                            <i class="fab fa-tiktok"></i>
                        </a>
                    </div>
                    <div class="text-sm text-gray-400">
                        <p>Email: comics@patrion.com</p>
                        <p>Support: support@patrion.com</p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 pt-8 text-center">
                <p class="text-gray-400 text-sm">
                    "Komik PATRION" adalah konten eksklusif dari <span class="text-fantasy-gold">PATRION Universe</span>.
                    © 2024 PATRION. All Rights Reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-black font-bold py-2 px-4 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Scripts -->
    <script>
        // Comic Data
        const comicData = {
            id: 1,
            title: "PATRION: Kebangkitan Api Nusantara",
            chapters: [
                { id: 1, title: "Chapter 1: Api Pertama", pages: 24, date: "2024-01-15", views: "25K" },
                { id: 2, title: "Chapter 2: Panggilan Gunung", pages: 22, date: "2024-01-22", views: "22K" },
                { id: 3, title: "Chapter 3: Mentor Misterius", pages: 26, date: "2024-01-29", views: "20K" },
                { id: 4, title: "Chapter 4: Artefak Hilang", pages: 24, date: "2024-02-05", views: "18K" },
                { id: 5, title: "Chapter 5: Pertemuan dengan ASTA", pages: 28, date: "2024-02-12", views: "17K" },
                { id: 6, title: "Chapter 6: Shadow Clan", pages: 25, date: "2024-02-19", views: "16K" },
                { id: 7, title: "Chapter 7: Hutan Terlarang", pages: 23, date: "2024-02-26", views: "15K" },
                { id: 8, title: "Chapter 8: Ujian Api", pages: 27, date: "2024-03-04", views: "14K" },
                { id: 9, title: "Chapter 9: Pertarungan di Gunung", pages: 26, date: "2024-03-11", views: "13K" },
                { id: 10, title: "Chapter 10: Rahasia Kuno", pages: 24, date: "2024-03-18", views: "12K" },
                { id: 11, title: "Chapter 11: Kebenaran Terungkap", pages: 28, date: "2024-03-25", views: "11K" },
                { id: 12, title: "Chapter 12: Persekutuan", pages: 25, date: "2024-04-01", views: "10K" },
                { id: 13, title: "Chapter 13: Perjalanan ke Timur", pages: 26, date: "2024-04-08", views: "9K" },
                { id: 14, title: "Chapter 14: Konfrontasi", pages: 29, date: "2024-04-15", views: "8K" },
                { id: 15, title: "Chapter 15: Api Abadi", pages: 30, date: "2024-04-22", views: "7K" }
            ],
            comments: [
                { id: 1, user: "Rizky", avatar: "R", rating: 5, date: "2 jam lalu", text: "Komiknya keren banget! Gambarnya detail banget dan ceritanya seru. Kapan chapter selanjutnya?" },
                { id: 2, user: "Santi", avatar: "S", rating: 4, date: "1 hari lalu", text: "Karakter Kunna sangat relatable. Suka bagaimana perkembangan karakternya dari chapter ke chapter." },
                                { id: 3, user: "Budi", avatar: "B", rating: 5, date: "3 hari lalu", text: "Seni gambarnya luar biasa! Warna-warna untuk elemen api benar-benar hidup. Kapan ada merchandise-nya?" },
                { id: 4, user: "Ayu", avatar: "A", rating: 4, date: "1 minggu lalu", text: "Plot twist di chapter 10 bikin kaget! Tidak menyangka karakter itu ternyata..." }
            ]
        };

        // State Variables
        let currentChapter = 1;
        let currentPage = 1;
        let totalPages = 24;
        let readerMode = 'single';
        let isBookmarked = false;
        let isLiked = false;
        let zoomLevel = 1;
        let isFullscreen = false;
        let selectedRating = 0;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializeComicPage();
            setupEventListeners();
            createParticleCanvas();
            updateChapterList();
            updateChapterPreviews();
            loadComments();
        });

        // Initialize Comic Page
        function initializeComicPage() {
            // Set current chapter from URL if available
            const urlParams = new URLSearchParams(window.location.search);
            const chapterParam = urlParams.get('chapter');
            if (chapterParam) {
                currentChapter = parseInt(chapterParam);
            }
            
            updateChapterDisplay();
            updateBookmarkButton();
            updateLikeButton();
            
            // Check if user came from "start reading" button
            const shouldStartReading = sessionStorage.getItem('startReading');
            if (shouldStartReading === 'true') {
                startReading();
                sessionStorage.removeItem('startReading');
            }
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Mobile menu toggle
            document.getElementById('mobile-menu-button').addEventListener('click', function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            });

            // Back to top button
            const backToTopBtn = document.getElementById('backToTop');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 300) {
                    backToTopBtn.classList.add('show');
                } else {
                    backToTopBtn.classList.remove('show');
                }
            });

            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Reading progress
            window.addEventListener('scroll', updateReadingProgress);

            // Rating stars
            const stars = document.querySelectorAll('#commentRating i');
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.getAttribute('data-rating'));
                    updateRatingStars();
                });
                
                star.addEventListener('mouseover', function() {
                    highlightStars(parseInt(this.getAttribute('data-rating')));
                });
                
                star.addEventListener('mouseout', function() {
                    updateRatingStars();
                });
            });

            // Fullscreen change
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('mozfullscreenchange', handleFullscreenChange);
            document.addEventListener('MSFullscreenChange', handleFullscreenChange);

            // Keyboard navigation
            document.addEventListener('keydown', handleKeyboardNavigation);
        }

        // Create Particle Canvas Background
        function createParticleCanvas() {
            const canvas = document.getElementById('particle-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const particles = [];
            const particleCount = 50;
            
            // Create particles
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 1,
                    speedX: Math.random() * 0.5 - 0.25,
                    speedY: Math.random() * 0.5 - 0.25,
                    color: Math.random() > 0.5 ? 'rgba(251, 191, 36, 0.3)' : 'rgba(59, 130, 246, 0.3)'
                });
            }
            
            function animateParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(particle => {
                    particle.x += particle.speedX;
                    particle.y += particle.speedY;
                    
                    // Bounce off walls
                    if (particle.x < 0 || particle.x > canvas.width) particle.speedX *= -1;
                    if (particle.y < 0 || particle.y > canvas.height) particle.speedY *= -1;
                    
                    // Draw particle
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    ctx.fillStyle = particle.color;
                    ctx.fill();
                });
                
                requestAnimationFrame(animateParticles);
            }
            
            animateParticles();
            
            // Resize handler
            window.addEventListener('resize', function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // Chapter Navigation
        function previousChapter() {
            if (currentChapter > 1) {
                currentChapter--;
                updateChapterDisplay();
                if (document.getElementById('readerSection').classList.contains('hidden')) {
                    // If in info mode, update preview
                    updateChapterPreviews();
                } else {
                    // If in reader mode, load new chapter
                    loadChapter();
                }
            }
        }

        function nextChapter() {
            if (currentChapter < comicData.chapters.length) {
                currentChapter++;
                updateChapterDisplay();
                if (document.getElementById('readerSection').classList.contains('hidden')) {
                    updateChapterPreviews();
                } else {
                    loadChapter();
                }
            }
        }

        function goToChapter(chapterId) {
            currentChapter = chapterId;
            updateChapterDisplay();
            if (!document.getElementById('readerSection').classList.contains('hidden')) {
                loadChapter();
            }
            updateChapterPreviews();
        }

        // Update Chapter Display
        function updateChapterDisplay() {
            const chapter = comicData.chapters.find(c => c.id === currentChapter);
            
            // Update chapter text
            document.getElementById('currentChapter').textContent = `Chapter ${currentChapter}`;
            document.getElementById('mobileCurrentChapter').textContent = `Chapter ${currentChapter}`;
            
            // Update page count
            if (chapter) {
                totalPages = chapter.pages;
                document.getElementById('totalPages').textContent = totalPages;
            }
            
            // Update chapter list highlighting
            updateChapterList();
            
            // Update URL without reloading
            const url = new URL(window.location);
            url.searchParams.set('chapter', currentChapter);
            window.history.replaceState({}, '', url);
        }

        // Update Chapter List
        function updateChapterList() {
            const chapterList = document.getElementById('chapterList');
            if (!chapterList) return;
            
            chapterList.innerHTML = '';
            
            // Sort chapters descending (newest first)
            const sortedChapters = [...comicData.chapters].sort((a, b) => b.id - a.id);
            
            sortedChapters.forEach(chapter => {
                const isCurrent = chapter.id === currentChapter;
                const chapterItem = document.createElement('div');
                chapterItem.className = `chapter-item p-4 cursor-pointer transition-all ${isCurrent ? 'current' : ''}`;
                chapterItem.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold text-white">${chapter.title}</span>
                        <span class="text-xs text-gray-400">${chapter.pages} halaman</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-400">${new Date(chapter.date).toLocaleDateString('id-ID')}</span>
                        <span class="text-fantasy-gold"><i class="far fa-eye mr-1"></i>${chapter.views}</span>
                    </div>
                `;
                chapterItem.addEventListener('click', () => goToChapter(chapter.id));
                chapterList.appendChild(chapterItem);
            });
        }

        // Update Chapter Previews
        function updateChapterPreviews() {
            const container = document.getElementById('chapterPreviews');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Show 6 latest chapters
            const previewChapters = comicData.chapters
                .sort((a, b) => b.id - a.id)
                .slice(0, 6);
            
            previewChapters.forEach(chapter => {
                const preview = document.createElement('div');
                preview.className = 'bg-gray-800/50 rounded-lg overflow-hidden cursor-pointer transform hover:scale-105 transition-transform';
                preview.innerHTML = `
                    <div class="h-32 bg-gradient-to-r from-red-900/50 to-orange-900/50 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">Ch ${chapter.id}</span>
                    </div>
                    <div class="p-3">
                        <h4 class="font-semibold text-white truncate">${chapter.title}</h4>
                        <div class="flex justify-between text-xs text-gray-400 mt-2">
                            <span>${chapter.pages} hal</span>
                            <span>${chapter.views}</span>
                        </div>
                    </div>
                `;
                preview.addEventListener('click', () => {
                    currentChapter = chapter.id;
                    startReading();
                });
                container.appendChild(preview);
            });
        }

        // Reading Functions
        function startReading() {
            // Show reader section, hide info section
            document.getElementById('readerSection').classList.remove('hidden');
            document.getElementById('infoSection').classList.add('hidden');
            
            // Load the current chapter
            loadChapter();
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Track reading start
            trackReadingStart();
        }

        function loadChapter() {
            const pageContainer = document.getElementById('pageContainer');
            const chapter = comicData.chapters.find(c => c.id === currentChapter);
            
            if (!pageContainer || !chapter) return;
            
            // Show loading
            pageContainer.innerHTML = `
                <div class="text-center py-20">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-400">Memuat Chapter ${currentChapter}: ${chapter.title}</p>
                </div>
            `;
            
            // Reset page to 1
            currentPage = 1;
            updatePageDisplay();
            
            // Simulate loading (in real app, this would fetch actual images)
            setTimeout(() => {
                renderPages();
            }, 1000);
        }

        function renderPages() {
            const pageContainer = document.getElementById('pageContainer');
            const chapter = comicData.chapters.find(c => c.id === currentChapter);
            
            if (!pageContainer || !chapter) return;
            
            pageContainer.innerHTML = '';
            pageContainer.className = `comic-page ${readerMode === 'double' ? 'reader-mode-double' : 'reader-mode-single'}`;
            
            // Generate mock pages
            for (let i = 1; i <= chapter.pages; i++) {
                const pageDiv = document.createElement('div');
                pageDiv.className = `mb-4 ${readerMode === 'double' ? '' : 'fade-in'}`;
                
                // In a real app, this would be actual image URLs
                pageDiv.innerHTML = `
                    <div class="relative bg-gradient-to-r from-gray-900 to-gray-800 rounded-lg overflow-hidden" style="min-height: 500px;">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="text-center p-8">
                                <div class="text-4xl mb-4 text-gray-300">
                                    <i class="fas fa-image"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white mb-2">Chapter ${currentChapter} - Halaman ${i}</h3>
                                <p class="text-gray-400">Ini adalah placeholder untuk halaman komik sebenarnya</p>
                                <div class="mt-4 text-sm text-gray-500">
                                    <p>Dalam aplikasi sebenarnya, di sini akan muncul gambar komik berkualitas tinggi</p>
                                </div>
                            </div>
                        </div>
                        <div class="absolute bottom-4 right-4 bg-black/70 text-white text-sm px-3 py-1 rounded-full">
                            Halaman ${i}
                        </div>
                    </div>
                `;
                
                pageContainer.appendChild(pageDiv);
            }
            
            // Update progress
            updateReadingProgress();
        }

        // Page Navigation
        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                updatePageDisplay();
                scrollToCurrentPage();
            } else if (currentChapter > 1) {
                // Go to last page of previous chapter
                previousChapter();
                currentPage = totalPages;
                updatePageDisplay();
                loadChapter();
            }
        }

        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                updatePageDisplay();
                scrollToCurrentPage();
            } else if (currentChapter < comicData.chapters.length) {
                // Go to first page of next chapter
                nextChapter();
                currentPage = 1;
                updatePageDisplay();
                loadChapter();
            }
        }

        function firstPage() {
            currentPage = 1;
            updatePageDisplay();
            scrollToCurrentPage();
        }

        function lastPage() {
            currentPage = totalPages;
            updatePageDisplay();
            scrollToCurrentPage();
        }

        function updatePageDisplay() {
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('totalPages').textContent = totalPages;
        }

        function scrollToCurrentPage() {
            const pages = document.querySelectorAll('.comic-page > div');
            if (pages.length > 0 && pages[currentPage - 1]) {
                pages[currentPage - 1].scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Reader Settings
        function changeReaderMode(mode) {
            readerMode = mode;
            
            // Update active button in desktop menu
            document.querySelectorAll('[onclick*="changeReaderMode"]').forEach(btn => {
                btn.classList.remove('active');
                if (btn.onclick.toString().includes(`'${mode}'`)) {
                    btn.classList.add('active');
                }
            });
            
            // Re-render pages if in reader mode
            if (!document.getElementById('readerSection').classList.contains('hidden')) {
                renderPages();
            }
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            // In a real app, you would save this preference
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        // Zoom Functions
        function zoomIn() {
            if (zoomLevel < 2) {
                zoomLevel += 0.1;
                applyZoom();
            }
        }

        function zoomOut() {
            if (zoomLevel > 0.5) {
                zoomLevel -= 0.1;
                applyZoom();
            }
        }

        function applyZoom() {
            const pages = document.querySelectorAll('.comic-page > div > div');
            pages.forEach(page => {
                page.style.transform = `scale(${zoomLevel})`;
                page.style.transformOrigin = 'center top';
            });
        }

        // Fullscreen Functions
        function toggleFullscreen() {
            const reader = document.getElementById('comicReader');
            
            if (!isFullscreen) {
                if (reader.requestFullscreen) {
                    reader.requestFullscreen();
                } else if (reader.webkitRequestFullscreen) {
                    reader.webkitRequestFullscreen();
                } else if (reader.mozRequestFullScreen) {
                    reader.mozRequestFullScreen();
                } else if (reader.msRequestFullscreen) {
                    reader.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        function handleFullscreenChange() {
            isFullscreen = !(!document.fullscreenElement && !document.webkitFullscreenElement && 
                            !document.mozFullScreenElement && !document.msFullscreenElement);
            
            // Update fullscreen button icon
            const fullscreenBtn = document.querySelector('[onclick="toggleFullscreen()"]');
            if (fullscreenBtn) {
                fullscreenBtn.innerHTML = isFullscreen ? 
                    '<i class="fas fa-compress"></i>' : 
                    '<i class="fas fa-expand"></i>';
            }
        }

        // User Actions
        function toggleBookmark() {
            isBookmarked = !isBookmarked;
            updateBookmarkButton();
            
            // In a real app, save to localStorage or send to server
            const bookmarks = JSON.parse(localStorage.getItem('patrionBookmarks') || '[]');
            if (isBookmarked) {
                if (!bookmarks.includes(comicData.id)) {
                    bookmarks.push(comicData.id);
                }
            } else {
                const index = bookmarks.indexOf(comicData.id);
                if (index > -1) {
                    bookmarks.splice(index, 1);
                }
            }
            localStorage.setItem('patrionBookmarks', JSON.stringify(bookmarks));
            
            // Show feedback
            showNotification(isBookmarked ? 'Komik disimpan!' : 'Komik dihapus dari penyimpanan', 'success');
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            if (!btn) return;
            
            if (isBookmarked) {
                btn.innerHTML = '<i class="fas fa-bookmark mr-2"></i> Tersimpan';
                btn.classList.remove('border-fantasy-gold', 'text-fantasy-gold');
                btn.classList.add('bg-fantasy-gold', 'text-fantasy-dark');
            } else {
                btn.innerHTML = '<i class="far fa-bookmark mr-2"></i> Simpan';
                btn.classList.remove('bg-fantasy-gold', 'text-fantasy-dark');
                btn.classList.add('border-fantasy-gold', 'text-fantasy-gold');
            }
        }

        function toggleLike() {
            isLiked = !isLiked;
            updateLikeButton();
            
            // In a real app, send to server
            const likes = JSON.parse(localStorage.getItem('patrionLikes') || '{}');
            likes[comicData.id] = isLiked;
            localStorage.setItem('patrionLikes', JSON.stringify(likes));
            
            // Show feedback
            showNotification(isLiked ? 'Komik disukai!' : 'Like dihapus', 'success');
        }

        function updateLikeButton() {
            const btn = document.getElementById('likeBtn');
            if (!btn) return;
            
            if (isLiked) {
                btn.innerHTML = '<i class="fas fa-heart mr-2"></i> Disukai';
                btn.classList.remove('border-red-500', 'text-red-500');
                btn.classList.add('bg-red-500', 'text-white');
            } else {
                btn.innerHTML = '<i class="far fa-heart mr-2"></i> Suka';
                btn.classList.remove('bg-red-500', 'text-white');
                btn.classList.add('border-red-500', 'text-red-500');
            }
        }

        // Comments Functions
        function loadComments() {
            const commentsList = document.getElementById('commentsList');
            if (!commentsList) return;
            
            commentsList.innerHTML = '';
            
            if (comicData.comments.length === 0) {
                commentsList.innerHTML = `
                    <div class="text-center py-8 text-gray-400">
                        <i class="fas fa-comments text-3xl mb-3"></i>
                        <p>Jadilah yang pertama berkomentar!</p>
                    </div>
                `;
                return;
            }
            
            comicData.comments.forEach(comment => {
                const commentCard = document.createElement('div');
                commentCard.className = 'comment-card p-4';
                commentCard.innerHTML = `
                    <div class="flex items-start mb-3">
                        <div class="comment-avatar mr-3">
                            ${comment.avatar}
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-center mb-1">
                                <h4 class="font-semibold text-white">${comment.user}</h4>
                                <span class="text-xs text-gray-400">${comment.date}</span>
                            </div>
                            <div class="rating-stars text-sm mb-2">
                                ${'★'.repeat(comment.rating)}${'☆'.repeat(5 - comment.rating)}
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300">${comment.text}</p>
                `;
                commentsList.appendChild(commentCard);
            });
        }

        function updateRatingStars() {
            const stars = document.querySelectorAll('#commentRating i');
            stars.forEach((star, index) => {
                if (index < selectedRating) {
                    star.className = 'fas fa-star';
                    star.style.color = '#fbbf24';
                } else {
                    star.className = 'far fa-star';
                    star.style.color = '#fbbf24';
                }
            });
        }

        function highlightStars(rating) {
            const stars = document.querySelectorAll('#commentRating i');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.className = 'fas fa-star';
                    star.style.color = '#fbbf24';
                } else {
                    star.className = 'far fa-star';
                    star.style.color = '#fbbf24';
                }
            });
        }

        function submitComment() {
            const commentInput = document.getElementById('commentInput');
            const commentText = commentInput.value.trim();
            
            if (!commentText) {
                showNotification('Silakan tulis komentar terlebih dahulu', 'error');
                return;
            }
            
            if (selectedRating === 0) {
                showNotification('Silakan beri rating untuk komik ini', 'error');
                return;
            }
            
            // In a real app, send to server
            const newComment = {
                id: comicData.comments.length + 1,
                user: "Anda", // In real app, get from user profile
                avatar: "A",
                rating: selectedRating,
                date: "Baru saja",
                text: commentText
            };
            
            // Add to beginning of comments array
            comicData.comments.unshift(newComment);
            
            // Update UI
            loadComments();
            
            // Clear form
            commentInput.value = '';
            selectedRating = 0;
            updateRatingStars();
            
            // Show success message
            showNotification('Komentar berhasil dikirim!', 'success');
            
            // Update average rating (in real app, this would be server-side)
            updateAverageRating();
        }

        function updateAverageRating() {
            // Calculate new average
            const totalRating = comicData.comments.reduce((sum, comment) => sum + comment.rating, 0);
            const averageRating = totalRating / comicData.comments.length;
            
            // Update display (simplified)
            console.log(`New average rating: ${averageRating.toFixed(1)}`);
        }

        // Progress Tracking
        function updateReadingProgress() {
            const progressBar = document.getElementById('readingProgress');
            if (!progressBar) return;
            
            if (!document.getElementById('readerSection').classList.contains('hidden')) {
                // Calculate progress based on current page and chapter
                const chapter = comicData.chapters.find(c => c.id === currentChapter);
                if (!chapter) return;
                
                const totalPagesSoFar = comicData.chapters
                    .filter(c => c.id < currentChapter)
                    .reduce((sum, c) => sum + c.pages, 0) + currentPage;
                
                const totalAllPages = comicData.chapters.reduce((sum, c) => sum + c.pages, 0);
                
                const progress = (totalPagesSoFar / totalAllPages) * 100;
                progressBar.style.width = `${progress}%`;
                
                // Save reading progress
                saveReadingProgress();
            } else {
                progressBar.style.width = '0%';
            }
        }

        function saveReadingProgress() {
            const progress = {
                comicId: comicData.id,
                chapter: currentChapter,
                page: currentPage,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem(`readingProgress_${comicData.id}`, JSON.stringify(progress));
        }

        function trackReadingStart() {
            // In a real app, send analytics event
            console.log(`Reading started: Comic ${comicData.id}, Chapter ${currentChapter}`);
            
            // Update view count (simulated)
            const chapter = comicData.chapters.find(c => c.id === currentChapter);
            if (chapter) {
                // This would be a server request in real app
                console.log(`View counted for ${chapter.title}`);
            }
        }

        // Keyboard Navigation
        function handleKeyboardNavigation(event) {
            // Only handle if in reader mode
            if (document.getElementById('readerSection').classList.contains('hidden')) return;
            
            switch(event.key) {
                case 'ArrowLeft':
                    previousPage();
                    break;
                case 'ArrowRight':
                    nextPage();
                    break;
                case 'Home':
                    firstPage();
                    break;
                case 'End':
                    lastPage();
                    break;
                case ' ':
                    event.preventDefault(); // Prevent space from scrolling
                    nextPage();
                    break;
                case '+':
                case '=':
                    zoomIn();
                    break;
                case '-':
                    zoomOut();
                    break;
                case 'f':
                case 'F':
                    toggleFullscreen();
                    break;
            }
        }

        // Utility Functions
        function showNotification(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'} mr-3 
                       ${type === 'success' ? 'text-green-400' : 'text-red-400'}"></i>
                    <span class="text-white">${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
                notification.classList.add('translate-x-0');
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.remove('translate-x-0');
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Initialize from localStorage
        function loadUserPreferences() {
            // Load bookmarks
            const bookmarks = JSON.parse(localStorage.getItem('patrionBookmarks') || '[]');
            isBookmarked = bookmarks.includes(comicData.id);
            updateBookmarkButton();
            
            // Load likes
            const likes = JSON.parse(localStorage.getItem('patrionLikes') || '{}');
            isLiked = likes[comicData.id] || false;
            updateLikeButton();
            
            // Load reading progress
            const progress = JSON.parse(localStorage.getItem(`readingProgress_${comicData.id}`) || 'null');
            if (progress) {
                currentChapter = progress.chapter;
                currentPage = progress.page;
                updateChapterDisplay();
                updatePageDisplay();
            }
            
            // Load dark mode preference
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'true') {
                document.body.classList.add('dark-mode');
            }
        }

        // Call loadUserPreferences on initialization
        loadUserPreferences();

        // Share functions (to be implemented)
        function shareComic() {
            if (navigator.share) {
                navigator.share({
                    title: comicData.title,
                    text: `Baca komik "${comicData.title}" di PATRION Universe`,
                    url: window.location.href
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(window.location.href);
                showNotification('Link berhasil disalin ke clipboard!', 'success');
            }
        }

        // Report function (to be implemented)
        function reportComic() {
            // In a real app, show a report modal
            console.log('Report comic:', comicData.id);
            showNotification('Laporan berhasil dikirim!', 'success');
        }

    </script>
</body>
</html>